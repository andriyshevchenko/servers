2026-01-25T22:07:13.9081580Z Current runner version: '2.331.0'
2026-01-25T22:07:13.9116699Z ##[group]Runner Image Provisioner
2026-01-25T22:07:13.9117899Z Hosted Compute Agent
2026-01-25T22:07:13.9118959Z Version: 20260115.477
2026-01-25T22:07:13.9120015Z Commit: 4b342d620503cbe250a3154040964899ea7c9b00
2026-01-25T22:07:13.9121217Z Build Date: 2026-01-15T22:32:41Z
2026-01-25T22:07:13.9122511Z Worker ID: {136450fe-3b0a-4d05-a9d4-2a1a9fc9a31a}
2026-01-25T22:07:13.9123906Z Azure Region: northcentralus
2026-01-25T22:07:13.9124845Z ##[endgroup]
2026-01-25T22:07:13.9126958Z ##[group]Operating System
2026-01-25T22:07:13.9128109Z Ubuntu
2026-01-25T22:07:13.9128889Z 24.04.3
2026-01-25T22:07:13.9129638Z LTS
2026-01-25T22:07:13.9130548Z ##[endgroup]
2026-01-25T22:07:13.9131375Z ##[group]Runner Image
2026-01-25T22:07:13.9132472Z Image: ubuntu-24.04
2026-01-25T22:07:13.9133483Z Version: 20260119.4.1
2026-01-25T22:07:13.9135411Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20260119.4/images/ubuntu/Ubuntu2404-Readme.md
2026-01-25T22:07:13.9138271Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20260119.4
2026-01-25T22:07:13.9139834Z ##[endgroup]
2026-01-25T22:07:13.9144807Z ##[group]GITHUB_TOKEN Permissions
2026-01-25T22:07:13.9147579Z Actions: write
2026-01-25T22:07:13.9148488Z ArtifactMetadata: write
2026-01-25T22:07:13.9149565Z Attestations: write
2026-01-25T22:07:13.9150623Z Checks: write
2026-01-25T22:07:13.9151481Z Contents: write
2026-01-25T22:07:13.9152656Z Deployments: write
2026-01-25T22:07:13.9153624Z Discussions: write
2026-01-25T22:07:13.9154470Z Issues: write
2026-01-25T22:07:13.9155514Z Metadata: read
2026-01-25T22:07:13.9156359Z Models: read
2026-01-25T22:07:13.9157164Z Packages: write
2026-01-25T22:07:13.9157901Z Pages: write
2026-01-25T22:07:13.9159014Z PullRequests: write
2026-01-25T22:07:13.9159893Z RepositoryProjects: write
2026-01-25T22:07:13.9161374Z SecurityEvents: write
2026-01-25T22:07:13.9162871Z Statuses: write
2026-01-25T22:07:13.9163695Z ##[endgroup]
2026-01-25T22:07:13.9166614Z Secret source: Actions
2026-01-25T22:07:13.9168215Z Prepare workflow directory
2026-01-25T22:07:14.0547420Z Prepare all required actions
2026-01-25T22:07:14.0586446Z Getting action download info
2026-01-25T22:07:14.3005003Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2026-01-25T22:07:14.4199692Z Download action repository 'actions/setup-node@v4' (SHA:49933ea5288caeca8642d1e84afbd3f7d6820020)
2026-01-25T22:07:14.6670959Z Complete job name: Test
2026-01-25T22:07:14.7394731Z ##[group]Checking docker version
2026-01-25T22:07:14.7408555Z ##[command]/usr/bin/docker version --format '{{.Server.APIVersion}}'
2026-01-25T22:07:14.8137329Z '1.48'
2026-01-25T22:07:14.8149456Z Docker daemon API version: '1.48'
2026-01-25T22:07:14.8150211Z ##[command]/usr/bin/docker version --format '{{.Client.APIVersion}}'
2026-01-25T22:07:14.8326719Z '1.48'
2026-01-25T22:07:14.8339567Z Docker client API version: '1.48'
2026-01-25T22:07:14.8345701Z ##[endgroup]
2026-01-25T22:07:14.8348698Z ##[group]Clean up resources from previous jobs
2026-01-25T22:07:14.8353983Z ##[command]/usr/bin/docker ps --all --quiet --no-trunc --filter "label=084bcd"
2026-01-25T22:07:14.8497251Z ##[command]/usr/bin/docker network prune --force --filter "label=084bcd"
2026-01-25T22:07:14.8624937Z ##[endgroup]
2026-01-25T22:07:14.8625423Z ##[group]Create local container network
2026-01-25T22:07:14.8635935Z ##[command]/usr/bin/docker network create --label 084bcd github_network_18685c3c84f440f5b0bb34fe5037ed79
2026-01-25T22:07:14.9164781Z 75dd029e0b75249877a4c3d0f9521645bff9d6b335ddeffe7d59959d742a8c02
2026-01-25T22:07:14.9185860Z ##[endgroup]
2026-01-25T22:07:14.9214866Z ##[group]Starting neo4j service container
2026-01-25T22:07:14.9236213Z ##[command]/usr/bin/docker pull neo4j:5.15.0
2026-01-25T22:07:15.3112466Z 5.15.0: Pulling from library/neo4j
2026-01-25T22:07:15.4253637Z 0e0969fcaa82: Pulling fs layer
2026-01-25T22:07:15.4254550Z 46717352c8c1: Pulling fs layer
2026-01-25T22:07:15.4255196Z 7b6c4391345c: Pulling fs layer
2026-01-25T22:07:15.4256202Z b3a561d23014: Pulling fs layer
2026-01-25T22:07:15.4256782Z 4136c74b119e: Pulling fs layer
2026-01-25T22:07:15.4257505Z b3a561d23014: Waiting
2026-01-25T22:07:15.4258333Z 4136c74b119e: Waiting
2026-01-25T22:07:15.6003630Z 7b6c4391345c: Verifying Checksum
2026-01-25T22:07:15.6004778Z 7b6c4391345c: Download complete
2026-01-25T22:07:15.7789448Z b3a561d23014: Download complete
2026-01-25T22:07:16.0969304Z 0e0969fcaa82: Download complete
2026-01-25T22:07:17.2550324Z 46717352c8c1: Verifying Checksum
2026-01-25T22:07:17.2551004Z 46717352c8c1: Download complete
2026-01-25T22:07:17.4610726Z 0e0969fcaa82: Pull complete
2026-01-25T22:07:17.6420985Z 4136c74b119e: Verifying Checksum
2026-01-25T22:07:17.6423253Z 4136c74b119e: Download complete
2026-01-25T22:07:19.6086593Z 46717352c8c1: Pull complete
2026-01-25T22:07:19.6352903Z 7b6c4391345c: Pull complete
2026-01-25T22:07:19.6480304Z b3a561d23014: Pull complete
2026-01-25T22:07:20.3918315Z 4136c74b119e: Pull complete
2026-01-25T22:07:20.3959613Z Digest: sha256:d9e2fb1ba398536e50d22ebc3d5d585baa086c1c0cf8e5b96bdc9e11e87e002a
2026-01-25T22:07:20.3971903Z Status: Downloaded newer image for neo4j:5.15.0
2026-01-25T22:07:20.3981983Z docker.io/library/neo4j:5.15.0
2026-01-25T22:07:20.4042799Z ##[command]/usr/bin/docker create --name 2f31ab8d3fef4e29abdac53c9daf3c35_neo4j5150_4a6cc6 --label 084bcd --network github_network_18685c3c84f440f5b0bb34fe5037ed79 --network-alias neo4j -p 7474:7474 -p 7687:7687 --health-cmd "wget --no-verbose --tries=1 --spider localhost:7474 || exit 1" --health-interval 10s --health-timeout 5s --health-retries 5 --health-start-period 30s -e "NEO4J_AUTH=neo4j/testpassword" -e GITHUB_ACTIONS=true -e CI=true neo4j:5.15.0
2026-01-25T22:07:20.4314836Z dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:07:20.4340436Z ##[command]/usr/bin/docker start dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:07:20.7205720Z dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:07:20.7225167Z ##[command]/usr/bin/docker ps --all --filter id=dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438 --filter status=running --no-trunc --format "{{.ID}} {{.Status}}"
2026-01-25T22:07:20.7360958Z dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438 Up Less than a second (health: starting)
2026-01-25T22:07:20.7391462Z ##[command]/usr/bin/docker port dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:07:20.7535493Z 7474/tcp -> 0.0.0.0:7474
2026-01-25T22:07:20.7536018Z 7474/tcp -> [::]:7474
2026-01-25T22:07:20.7538189Z 7687/tcp -> 0.0.0.0:7687
2026-01-25T22:07:20.7538560Z 7687/tcp -> [::]:7687
2026-01-25T22:07:20.7586549Z ##[endgroup]
2026-01-25T22:07:20.7597317Z ##[group]Waiting for all services to be ready
2026-01-25T22:07:20.7613080Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:07:20.7746469Z starting
2026-01-25T22:07:20.7773139Z neo4j service is starting, waiting 2 seconds before checking again.
2026-01-25T22:07:22.7779015Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:07:22.7984501Z starting
2026-01-25T22:07:22.7994661Z neo4j service is starting, waiting 3 seconds before checking again.
2026-01-25T22:07:26.6325711Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:07:26.6629219Z starting
2026-01-25T22:07:26.6656919Z neo4j service is starting, waiting 6 seconds before checking again.
2026-01-25T22:07:33.5189397Z ##[command]/usr/bin/docker inspect --format="{{if .Config.Healthcheck}}{{print .State.Health.Status}}{{end}}" dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:07:33.5310583Z healthy
2026-01-25T22:07:33.5327788Z neo4j service is healthy.
2026-01-25T22:07:33.5328624Z ##[endgroup]
2026-01-25T22:07:33.6975153Z ##[group]Run actions/checkout@v4
2026-01-25T22:07:33.6975732Z with:
2026-01-25T22:07:33.6976011Z   repository: andriyshevchenko/mcp-memory-graph-enhanced
2026-01-25T22:07:33.6976562Z   token: ***
2026-01-25T22:07:33.6976744Z   ssh-strict: true
2026-01-25T22:07:33.6976919Z   ssh-user: git
2026-01-25T22:07:33.6977110Z   persist-credentials: true
2026-01-25T22:07:33.6977323Z   clean: true
2026-01-25T22:07:33.6977507Z   sparse-checkout-cone-mode: true
2026-01-25T22:07:33.6977755Z   fetch-depth: 1
2026-01-25T22:07:33.6977923Z   fetch-tags: false
2026-01-25T22:07:33.6978102Z   show-progress: true
2026-01-25T22:07:33.6978276Z   lfs: false
2026-01-25T22:07:33.6978438Z   submodules: false
2026-01-25T22:07:33.6978615Z   set-safe-directory: true
2026-01-25T22:07:33.6979017Z ##[endgroup]
2026-01-25T22:07:33.8066903Z Syncing repository: andriyshevchenko/mcp-memory-graph-enhanced
2026-01-25T22:07:33.8068406Z ##[group]Getting Git version info
2026-01-25T22:07:33.8068981Z Working directory is '/home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced'
2026-01-25T22:07:33.8069679Z [command]/usr/bin/git version
2026-01-25T22:07:33.8133392Z git version 2.52.0
2026-01-25T22:07:33.8160057Z ##[endgroup]
2026-01-25T22:07:33.8181972Z Temporarily overriding HOME='/home/runner/work/_temp/a0645bc9-6a17-47a1-8c94-723f3dbc07b6' before making global git config changes
2026-01-25T22:07:33.8183102Z Adding repository directory to the temporary git global config as a safe directory
2026-01-25T22:07:33.8187968Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced
2026-01-25T22:07:33.8228626Z Deleting the contents of '/home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced'
2026-01-25T22:07:33.8232294Z ##[group]Initializing the repository
2026-01-25T22:07:33.8237513Z [command]/usr/bin/git init /home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced
2026-01-25T22:07:33.8333310Z hint: Using 'master' as the name for the initial branch. This default branch name
2026-01-25T22:07:33.8334072Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2026-01-25T22:07:33.8334618Z hint: to use in all of your new repositories, which will suppress this warning,
2026-01-25T22:07:33.8334984Z hint: call:
2026-01-25T22:07:33.8335144Z hint:
2026-01-25T22:07:33.8335472Z hint: 	git config --global init.defaultBranch <name>
2026-01-25T22:07:33.8335764Z hint:
2026-01-25T22:07:33.8336027Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2026-01-25T22:07:33.8336544Z hint: 'development'. The just-created branch can be renamed via this command:
2026-01-25T22:07:33.8337174Z hint:
2026-01-25T22:07:33.8337462Z hint: 	git branch -m <name>
2026-01-25T22:07:33.8337760Z hint:
2026-01-25T22:07:33.8338050Z hint: Disable this message with "git config set advice.defaultBranchName false"
2026-01-25T22:07:33.8338709Z Initialized empty Git repository in /home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced/.git/
2026-01-25T22:07:33.8348919Z [command]/usr/bin/git remote add origin https://github.com/andriyshevchenko/mcp-memory-graph-enhanced
2026-01-25T22:07:33.8383399Z ##[endgroup]
2026-01-25T22:07:33.8383809Z ##[group]Disabling automatic garbage collection
2026-01-25T22:07:33.8387637Z [command]/usr/bin/git config --local gc.auto 0
2026-01-25T22:07:33.8418335Z ##[endgroup]
2026-01-25T22:07:33.8418958Z ##[group]Setting up auth
2026-01-25T22:07:33.8426402Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-25T22:07:33.8458272Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-25T22:07:33.8786584Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-25T22:07:33.8818863Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-25T22:07:33.9045693Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-25T22:07:33.9079365Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-25T22:07:33.9325348Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2026-01-25T22:07:33.9365134Z ##[endgroup]
2026-01-25T22:07:33.9365790Z ##[group]Fetching the repository
2026-01-25T22:07:33.9378171Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +ef31d110e9207343f275aa3aa9ac0566aa38204d:refs/remotes/origin/copilot/update-tools-thread-id-parameter
2026-01-25T22:07:34.2365341Z From https://github.com/andriyshevchenko/mcp-memory-graph-enhanced
2026-01-25T22:07:34.2366118Z  * [new ref]         ef31d110e9207343f275aa3aa9ac0566aa38204d -> origin/copilot/update-tools-thread-id-parameter
2026-01-25T22:07:34.2401132Z ##[endgroup]
2026-01-25T22:07:34.2401517Z ##[group]Determining the checkout info
2026-01-25T22:07:34.2404183Z ##[endgroup]
2026-01-25T22:07:34.2409327Z [command]/usr/bin/git sparse-checkout disable
2026-01-25T22:07:34.2451179Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2026-01-25T22:07:34.2478262Z ##[group]Checking out the ref
2026-01-25T22:07:34.2483389Z [command]/usr/bin/git checkout --progress --force -B copilot/update-tools-thread-id-parameter refs/remotes/origin/copilot/update-tools-thread-id-parameter
2026-01-25T22:07:34.2603248Z Switched to a new branch 'copilot/update-tools-thread-id-parameter'
2026-01-25T22:07:34.2606254Z branch 'copilot/update-tools-thread-id-parameter' set up to track 'origin/copilot/update-tools-thread-id-parameter'.
2026-01-25T22:07:34.2612627Z ##[endgroup]
2026-01-25T22:07:34.2650041Z [command]/usr/bin/git log -1 --format=%H
2026-01-25T22:07:34.2673634Z ef31d110e9207343f275aa3aa9ac0566aa38204d
2026-01-25T22:07:34.4245088Z ##[group]Run actions/setup-node@v4
2026-01-25T22:07:34.4245384Z with:
2026-01-25T22:07:34.4245554Z   node-version: 22
2026-01-25T22:07:34.4245746Z   cache: npm
2026-01-25T22:07:34.4245922Z   always-auth: false
2026-01-25T22:07:34.4246111Z   check-latest: false
2026-01-25T22:07:34.4246549Z   token: ***
2026-01-25T22:07:34.4246725Z ##[endgroup]
2026-01-25T22:07:34.6054491Z Found in cache @ /opt/hostedtoolcache/node/22.22.0/x64
2026-01-25T22:07:34.6060751Z ##[group]Environment details
2026-01-25T22:07:39.5913301Z node: v22.22.0
2026-01-25T22:07:39.5913673Z npm: 10.9.4
2026-01-25T22:07:39.5913944Z yarn: 1.22.22
2026-01-25T22:07:39.5915426Z ##[endgroup]
2026-01-25T22:07:39.5934603Z [command]/opt/hostedtoolcache/node/22.22.0/x64/bin/npm config get cache
2026-01-25T22:07:39.8758175Z /home/runner/.npm
2026-01-25T22:07:40.0001027Z Cache hit for: node-cache-Linux-x64-npm-f58c3acd053bdd595e8766ed0bba4eca36f34a2c2b9f0122a72e87261d1b4c94
2026-01-25T22:07:40.6191016Z Received 21039362 of 21039362 (100.0%), 39.6 MBs/sec
2026-01-25T22:07:40.6192932Z Cache Size: ~20 MB (21039362 B)
2026-01-25T22:07:40.6252578Z [command]/usr/bin/tar -xf /home/runner/work/_temp/e0425121-79b1-4af7-b46f-faad4be47925/cache.tzst -P -C /home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced --use-compress-program unzstd
2026-01-25T22:07:40.7135725Z Cache restored successfully
2026-01-25T22:07:40.7181393Z Cache restored from key: node-cache-Linux-x64-npm-f58c3acd053bdd595e8766ed0bba4eca36f34a2c2b9f0122a72e87261d1b4c94
2026-01-25T22:07:40.7371444Z ##[group]Run npm ci
2026-01-25T22:07:40.7371726Z [36;1mnpm ci[0m
2026-01-25T22:07:40.7416264Z shell: /usr/bin/bash -e {0}
2026-01-25T22:07:40.7416530Z ##[endgroup]
2026-01-25T22:07:43.4059314Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2026-01-25T22:07:43.4952507Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2026-01-25T22:07:47.7282281Z 
2026-01-25T22:07:47.7283234Z added 219 packages, and audited 221 packages in 7s
2026-01-25T22:07:47.7283778Z 
2026-01-25T22:07:47.7284127Z 63 packages are looking for funding
2026-01-25T22:07:47.7291967Z   run `npm fund` for details
2026-01-25T22:07:47.7541887Z 
2026-01-25T22:07:47.7543724Z 6 moderate severity vulnerabilities
2026-01-25T22:07:47.7544202Z 
2026-01-25T22:07:47.7546239Z To address all issues (including breaking changes), run:
2026-01-25T22:07:47.7553339Z   npm audit fix --force
2026-01-25T22:07:47.7553697Z 
2026-01-25T22:07:47.7553951Z Run `npm audit` for details.
2026-01-25T22:07:47.8228221Z ##[group]Run npm ci
2026-01-25T22:07:47.8228483Z [36;1mnpm ci[0m
2026-01-25T22:07:47.8261255Z shell: /usr/bin/bash -e {0}
2026-01-25T22:07:47.8273087Z ##[endgroup]
2026-01-25T22:07:49.1911152Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2026-01-25T22:07:49.2819453Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2026-01-25T22:07:53.5224410Z 
2026-01-25T22:07:53.5225250Z added 219 packages, and audited 221 packages in 6s
2026-01-25T22:07:53.5225734Z 
2026-01-25T22:07:53.5226004Z 63 packages are looking for funding
2026-01-25T22:07:53.5226515Z   run `npm fund` for details
2026-01-25T22:07:53.5527921Z 
2026-01-25T22:07:53.5528870Z 6 moderate severity vulnerabilities
2026-01-25T22:07:53.5529321Z 
2026-01-25T22:07:53.5529751Z To address all issues (including breaking changes), run:
2026-01-25T22:07:53.5530421Z   npm audit fix --force
2026-01-25T22:07:53.5530720Z 
2026-01-25T22:07:53.5530933Z Run `npm audit` for details.
2026-01-25T22:07:53.5906708Z ##[group]Run npm test
2026-01-25T22:07:53.5907020Z [36;1mnpm test[0m
2026-01-25T22:07:53.5939119Z shell: /usr/bin/bash -e {0}
2026-01-25T22:07:53.5939353Z env:
2026-01-25T22:07:53.5939559Z   NEO4J_URI: neo4j://localhost:7687
2026-01-25T22:07:53.5939807Z   NEO4J_USERNAME: neo4j
2026-01-25T22:07:53.5940028Z   NEO4J_PASSWORD: testpassword
2026-01-25T22:07:53.5940246Z ##[endgroup]
2026-01-25T22:07:53.7109487Z 
2026-01-25T22:07:53.7110136Z > server-memory-enhanced@3.0.0 test
2026-01-25T22:07:53.7110600Z > vitest run --coverage
2026-01-25T22:07:53.7110756Z 
2026-01-25T22:07:54.1238009Z 
2026-01-25T22:07:54.1240302Z [1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90m/home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced/src/memory-enhanced[39m
2026-01-25T22:07:54.1241825Z       [2mCoverage enabled with [22m[33mv8[39m
2026-01-25T22:07:54.1242509Z 
2026-01-25T22:07:54.8114982Z  [31m❯[39m __tests__/save-memory-integration.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[90m 47[2mms[22m[39m
2026-01-25T22:07:54.8117213Z [31m   [31m×[31m Save Memory Handler - Integration Tests[2m > [22mshould successfully save valid entities with relations[90m 21[2mms[22m[31m[39m
2026-01-25T22:07:54.8118635Z [31m     → expected false to be true // Object.is equality[39m
2026-01-25T22:07:54.8120296Z [31m   [31m×[31m Save Memory Handler - Integration Tests[2m > [22mshould apply default confidence and importance values[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:54.8121163Z [31m     → expected false to be true // Object.is equality[39m
2026-01-25T22:07:54.8122311Z [31m   [31m×[31m Save Memory Handler - Integration Tests[2m > [22mshould respect custom confidence and importance values[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8123130Z [31m     → expected false to be true // Object.is equality[39m
2026-01-25T22:07:54.8123989Z [31m   [31m×[31m Save Memory Handler - Integration Tests[2m > [22mshould create bidirectional relations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8125165Z [31m     → expected false to be true // Object.is equality[39m
2026-01-25T22:07:54.8127013Z [31m   [31m×[31m Save Memory Handler - Integration Tests[2m > [22mshould generate warnings for entity type normalization[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8128549Z [31m     → expected false to be true // Object.is equality[39m
2026-01-25T22:07:54.8130297Z [31m   [31m×[31m Save Memory Handler - Integration Tests[2m > [22mshould calculate quality score based on graph structure[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8131745Z [31m     → expected false to be true // Object.is equality[39m
2026-01-25T22:07:54.8133757Z [31m   [31m×[31m Save Memory Handler - Integration Tests[2m > [22mshould allow incremental building with cross-thread entity references[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8135227Z [31m     → expected false to be true // Object.is equality[39m
2026-01-25T22:07:54.8137097Z [31m   [31m×[31m Save Memory Handler - Integration Tests[2m > [22mEntity Names in Response[2m > [22mshould return entity names after successful save[90m 5[2mms[22m[31m[39m
2026-01-25T22:07:54.8138492Z [31m     → expected false to be true // Object.is equality[39m
2026-01-25T22:07:54.8341449Z  [31m❯[39m __tests__/knowledge-graph-manager-extended.test.ts [2m([22m[2m24 tests[22m[2m | [22m[31m21 failed[39m[2m)[22m[90m 62[2mms[22m[39m
2026-01-25T22:07:54.8344708Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mgetMemoryStats[2m > [22mshould return correct stats for populated graph[90m 15[2mms[22m[31m[39m
2026-01-25T22:07:54.8346483Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8348512Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mgetRecentChanges[2m > [22mshould return entities modified after specified date[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:54.8350715Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8352949Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mgetRecentChanges[2m > [22mshould include relations with recent timestamps[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8354731Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8356734Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mfindRelationPath[2m > [22mshould return empty path when no connection exists[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8358529Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8360445Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mfindRelationPath[2m > [22mshould find direct path between connected entities[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8362253Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8364034Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mfindRelationPath[2m > [22mshould respect maxDepth parameter[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:54.8365540Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8367431Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mdetectConflicts[2m > [22mshould detect no conflicts in consistent observations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8368928Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8370590Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mdetectConflicts[2m > [22mshould detect conflicts with negation words[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:54.8372011Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8374004Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mpruneMemory[2m > [22mshould not remove entities when no criteria match[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:54.8375868Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8377582Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mpruneMemory[2m > [22mshould remove old low-importance entities[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8379038Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8380762Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mpruneMemory[2m > [22mshould respect keepMinEntities parameter[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8382429Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8384118Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mbulkUpdate[2m > [22mshould update multiple entities at once[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8385589Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8387262Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mbulkUpdate[2m > [22mshould report not found entities[90m 4[2mms[22m[31m[39m
2026-01-25T22:07:54.8388407Z [31m     → updates is not iterable[39m
2026-01-25T22:07:54.8389894Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mbulkUpdate[2m > [22mshould add observations during bulk update[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:54.8391373Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8393125Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mflagForReview[2m > [22mshould flag entity for review[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8394520Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8396178Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mflagForReview[2m > [22mshould include reviewer when provided[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8397878Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8399918Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mgetFlaggedEntities[2m > [22mshould return empty array when no entities are flagged[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8401497Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8403559Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mgetContext[2m > [22mshould retrieve entities and relations within specified depth[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8405264Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8406936Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mgetContext[2m > [22mshould respect depth parameter[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8408376Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8410275Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mgetContext[2m > [22mshould expand context through multiple depth levels[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8411800Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:54.8413915Z [31m   [31m×[31m KnowledgeGraphManager - Extended Coverage[2m > [22mlistConversations[2m > [22mshould list all conversations with metadata[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:54.8415459Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.1610160Z [90mstderr[2m | __tests__/knowledge-graph.test.ts
2026-01-25T22:07:55.1613054Z [22m[39mAttempting to connect to Neo4j at neo4j://localhost:7687
2026-01-25T22:07:55.1616152Z 
2026-01-25T22:07:55.1645373Z  [32m✓[39m __tests__/save-memory-validation.test.ts [2m([22m[2m49 tests[22m[2m)[22m[90m 20[2mms[22m[39m
2026-01-25T22:07:55.2727413Z  [31m❯[39m __tests__/thread-isolation.test.ts [2m([22m[2m16 tests[22m[2m | [22m[31m16 failed[39m[2m)[22m[90m 32[2mms[22m[39m
2026-01-25T22:07:55.2730365Z [31m   [31m×[31m Thread Isolation[2m > [22mreadGraph[2m > [22mshould only return entities and relations from the specified thread[90m 12[2mms[22m[31m[39m
2026-01-25T22:07:55.2732460Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2734183Z [31m   [31m×[31m Thread Isolation[2m > [22mreadGraph[2m > [22mshould not leak data between threads[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2735769Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2737561Z [31m   [31m×[31m Thread Isolation[2m > [22msearchNodes[2m > [22mshould only search within the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2739265Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2741130Z [31m   [31m×[31m Thread Isolation[2m > [22mopenNodes[2m > [22mshould only open nodes from the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2748692Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2750702Z [31m   [31m×[31m Thread Isolation[2m > [22mqueryNodes[2m > [22mshould only query nodes from the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2752577Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2754305Z [31m   [31m×[31m Thread Isolation[2m > [22mlistEntities[2m > [22mshould only list entities from the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2755897Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2757457Z [31m   [31m×[31m Thread Isolation[2m > [22mlistEntities[2m > [22mshould filter by entity type within thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2758817Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2760763Z [31m   [31m×[31m Thread Isolation[2m > [22mgetMemoryStats[2m > [22mshould return stats only for the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2762568Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2764401Z [31m   [31m×[31m Thread Isolation[2m > [22mgetRecentChanges[2m > [22mshould only return changes from the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2766006Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2767813Z [31m   [31m×[31m Thread Isolation[2m > [22mfindRelationPath[2m > [22mshould only find paths within the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2769356Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2771169Z [31m   [31m×[31m Thread Isolation[2m > [22mdetectConflicts[2m > [22mshould only detect conflicts within the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2773144Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2774839Z [31m   [31m×[31m Thread Isolation[2m > [22mgetContext[2m > [22mshould only get context within the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2776344Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2778290Z [31m   [31m×[31m Thread Isolation[2m > [22mgetFlaggedEntities[2m > [22mshould only return flagged entities from the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2793331Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2795395Z [31m   [31m×[31m Thread Isolation[2m > [22mgetObservationHistory[2m > [22mshould only retrieve observation history from the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2797098Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2799367Z [31m   [31m×[31m Thread Isolation[2m > [22mgetEntityNamesInThread[2m > [22mshould only return entity names from the specified thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2800974Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.2828313Z [31m   [31m×[31m Thread Isolation[2m > [22mCross-thread reference prevention[2m > [22mshould prevent relations to entities in other threads during validation[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.2830242Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3678197Z  [31m❯[39m __tests__/knowledge-graph.test.ts [2m([22m[2m33 tests[22m[2m | [22m[31m32 failed[39m[2m)[22m[90m 139[2mms[22m[39m
2026-01-25T22:07:55.3698056Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateEntities with metadata[2m > [22mshould create new entities with all metadata fields[90m 29[2mms[22m[31m[39m
2026-01-25T22:07:55.3700122Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3702455Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateEntities with metadata[2m > [22mshould not create duplicate entities[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:55.3704310Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3706362Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateEntities with metadata[2m > [22mshould handle empty entity arrays[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:55.3708183Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3710381Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateRelations with metadata[2m > [22mshould create new relations with all metadata fields[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3712335Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3719728Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateRelations with metadata[2m > [22mshould not create duplicate relations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3721663Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3724165Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mMulti-thread file storage[2m > [22mshould store entities from different threads in separate files[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3726264Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3728434Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mMulti-thread file storage[2m > [22mshould store relations from different threads in separate files[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3730287Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3732753Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22maddObservations with metadata[2m > [22mshould add observations and update entity metadata[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3734506Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3736508Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22maddObservations with metadata[2m > [22mshould not add duplicate observations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3738206Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3740286Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22maddObservations with metadata[2m > [22mshould throw error for non-existent entity[90m 15[2mms[22m[31m[39m
2026-01-25T22:07:55.3742891Z [31m     → expected [Function] to throw error including 'Entity with name NonExistent not found' but got 'Cannot read properties of undefined (…'[39m
2026-01-25T22:07:55.3745650Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mdeleteEntities[2m > [22mshould delete entities and associated relations[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:55.3747284Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3749137Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22msearchNodes[2m > [22mshould search entities by name, type, and observations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3750949Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3753162Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mopenNodes[2m > [22mshould retrieve specific entities by name[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3754904Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3757030Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould filter by timestamp range[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3758903Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3773148Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould filter by confidence range[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3775027Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3777164Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould filter by importance range[90m 3[2mms[22m[31m[39m
2026-01-25T22:07:55.3779182Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3781713Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould filter by multiple range criteria[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3783864Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3786188Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould include relations when both entities pass filter[90m 20[2mms[22m[31m[39m
2026-01-25T22:07:55.3788147Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3790368Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould return all data when no filters provided[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3812684Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3815094Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould return empty result when no data matches filters[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:55.3817029Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3819492Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mCross-thread operations[2m > [22mshould maintain single entity when observations added from different thread[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3821486Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3823829Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistConversations[2m > [22mshould list single conversation with correct metadata[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3825670Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3827897Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistConversations[2m > [22mshould list multiple conversations sorted by last updated[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:55.3829851Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3832672Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistConversations[2m > [22mshould count both entities and relations from the same thread[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:55.3834547Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3836882Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistConversations[2m > [22mshould handle threads with only relations (no entities from that thread)[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3838802Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3841008Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould list all entities from a thread when only threadId is provided[90m 4[2mms[22m[31m[39m
2026-01-25T22:07:55.3843210Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3845038Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould filter by threadId[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3846594Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3848398Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould filter by entityType[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3849975Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3852002Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould filter by namePattern (case-insensitive)[90m 18[2mms[22m[31m[39m
2026-01-25T22:07:55.3858077Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3860294Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould combine multiple filters[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:55.3862265Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3864336Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould return empty array when no matches[90m 4[2mms[22m[31m[39m
2026-01-25T22:07:55.3866033Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.3868038Z [31m   [31m×[31m KnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould return only name and entityType fields[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.3869728Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.5759883Z  [32m✓[39m __tests__/jsonl-storage-adapter-extended.test.ts [2m([22m[2m14 tests[22m[2m)[22m[90m 58[2mms[22m[39m
2026-01-25T22:07:55.7041336Z  [31m❯[39m __tests__/analytics.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[90m 26[2mms[22m[39m
2026-01-25T22:07:55.7045672Z [31m   [31m×[31m Analytics - getAnalytics[2m > [22mshould return recent changes sorted chronologically[90m 12[2mms[22m[31m[39m
2026-01-25T22:07:55.7049175Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.7053516Z [31m   [31m×[31m Analytics - getAnalytics[2m > [22mshould return top important entities by importance score[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.7057100Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.7060828Z [31m   [31m×[31m Analytics - getAnalytics[2m > [22mshould return most connected entities by relation count[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.7065047Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.7069459Z [31m   [31m×[31m Analytics - getAnalytics[2m > [22mshould identify orphaned entities with no relations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.7073367Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.7078603Z [31m   [31m×[31m Analytics - getAnalytics[2m > [22mshould identify entities with broken relations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.7080042Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.7081502Z [31m   [31m×[31m Analytics - getAnalytics[2m > [22mshould filter analytics by threadId[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.7087880Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.7089382Z [31m   [31m×[31m Analytics - getAnalytics[2m > [22mshould limit recent changes to 10 entities[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.7090718Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.9738621Z  [31m❯[39m __tests__/observation-history.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[90m 27[2mms[22m[39m
2026-01-25T22:07:55.9743422Z [31m   [31m×[31m Observation Versioning - getObservationHistory[2m > [22mshould throw error for non-existent observation[90m 10[2mms[22m[31m[39m
2026-01-25T22:07:55.9745158Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.9747026Z [31m   [31m×[31m Observation Versioning - getObservationHistory[2m > [22mshould handle observation with no version chain[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.9748670Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.9750693Z [31m   [31m×[31m Observation Versioning - getObservationHistory[2m > [22mshould traverse version chain forwards (superseded_by)[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.9753830Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.9756314Z [31m   [31m×[31m Observation Versioning - getObservationHistory[2m > [22mshould traverse version chain backwards (supersedes)[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.9758084Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.9759913Z [31m   [31m×[31m Observation Versioning - getObservationHistory[2m > [22mshould handle mid-chain starting point[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.9761563Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.9763682Z [31m   [31m×[31m Observation Versioning - getObservationHistory[2m > [22mshould return observations in version chain order[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.9765411Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:55.9767264Z [31m   [31m×[31m Observation Versioning - getObservationHistory[2m > [22mshould include all observation fields in history[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:55.9768798Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.4317046Z  [31m❯[39m __tests__/edge-cases-coverage.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[90m 25[2mms[22m[39m
2026-01-25T22:07:56.4321878Z [31m   [31m×[31m Edge Cases for Coverage[2m > [22mAnalytics Edge Cases[2m > [22mshould handle orphaned entities with broken relations[90m 13[2mms[22m[31m[39m
2026-01-25T22:07:56.4326326Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.4333413Z [31m   [31m×[31m Edge Cases for Coverage[2m > [22mAnalytics Edge Cases[2m > [22mshould handle entities with zero relations[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:56.4335056Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.4337098Z [31m   [31m×[31m Edge Cases for Coverage[2m > [22mAnalytics Edge Cases[2m > [22mshould analyze entities with multiple observation versions[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.4338881Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.4341377Z [31m   [31m×[31m Edge Cases for Coverage[2m > [22mQuery Edge Cases[2m > [22mshould handle query with all filters[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.4343207Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.4345122Z [31m   [31m×[31m Edge Cases for Coverage[2m > [22mSearch Edge Cases[2m > [22mshould handle search with special regex characters[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.4346782Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.4348567Z [31m   [31m×[31m Edge Cases for Coverage[2m > [22mSearch Edge Cases[2m > [22mshould handle case-insensitive search[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.4350145Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.5761206Z [90mstderr[2m | __tests__/validate-memory.test.ts
2026-01-25T22:07:56.5777074Z [22m[39mAttempting to connect to Neo4j at neo4j://localhost:7687
2026-01-25T22:07:56.5777579Z 
2026-01-25T22:07:56.7392759Z  [31m❯[39m __tests__/validate-memory.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[90m 91[2mms[22m[39m
2026-01-25T22:07:56.7394873Z [31m   [31m×[31m Validate Memory Tool[2m > [22mPre-validation without saving[2m > [22mshould validate cross-thread entity references[90m 39[2mms[22m[31m[39m
2026-01-25T22:07:56.7419210Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.8769292Z  [31m❯[39m __tests__/update-observation.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[90m 25[2mms[22m[39m
2026-01-25T22:07:56.8775754Z [31m   [31m×[31m updateObservation[2m > [22mshould update an observation and create a new version[90m 11[2mms[22m[31m[39m
2026-01-25T22:07:56.8781438Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.8784399Z [31m   [31m×[31m updateObservation[2m > [22mshould inherit confidence and importance from old observation if not provided[90m 2[2mms[22m[31m[39m
2026-01-25T22:07:56.8787325Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.8791304Z [31m   [31m×[31m updateObservation[2m > [22mshould inherit from entity if observation does not have confidence/importance[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.8793216Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.8794724Z [31m   [31m×[31m updateObservation[2m > [22mshould throw error if observation not found[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.8796052Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.8798065Z [31m   [31m×[31m updateObservation[2m > [22mshould throw error if observation already superseded[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.8799597Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.8805418Z [31m   [31m×[31m updateObservation[2m > [22mshould create a valid version chain[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.8806641Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:56.8807984Z [31m   [31m×[31m updateObservation[2m > [22mshould update entity timestamp[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:56.8809181Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:57.2555817Z [90mstdout[2m | __tests__/neo4j-e2e.test.ts[2m > [22m[2mNeo4j Storage Adapter E2E
2026-01-25T22:07:57.2560269Z [22m[39mNeo4j connection successful
2026-01-25T22:07:57.2561662Z 
2026-01-25T22:07:57.6793183Z [90mstderr[2m | __tests__/storage-abstraction.test.ts[2m > [22m[2mStorage Abstraction[2m > [22m[2mJSONL storage adapter (default)[2m > [22m[2mshould create and read entities using JSONL storage
2026-01-25T22:07:57.6795017Z [22m[39mAttempting to connect to Neo4j at neo4j://localhost:7687
2026-01-25T22:07:57.6796026Z 
2026-01-25T22:07:57.7880202Z  [31m❯[39m __tests__/storage-abstraction.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[90m 64[2mms[22m[39m
2026-01-25T22:07:57.7886800Z [31m   [31m×[31m Storage Abstraction[2m > [22mJSONL storage adapter (default)[2m > [22mshould create and read entities using JSONL storage[90m 40[2mms[22m[31m[39m
2026-01-25T22:07:57.7888995Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:57.7892551Z [31m   [31m×[31m Storage Abstraction[2m > [22mIn-memory storage adapter (custom)[2m > [22mshould create and read entities[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:57.7895932Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:57.7897737Z [31m   [31m×[31m Storage Abstraction[2m > [22mIn-memory storage adapter (custom)[2m > [22mshould create entities and relations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:57.7899354Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:57.7901217Z [31m   [31m×[31m Storage Abstraction[2m > [22mIn-memory storage adapter (custom)[2m > [22mshould handle multiple sequential operations[90m 1[2mms[22m[31m[39m
2026-01-25T22:07:57.7902962Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:57.7953635Z [90mstderr[2m | __tests__/index.test.ts[2m > [22m[2mServer Initialization - index.ts[2m > [22m[2mensureMemoryDirectory[2m > [22m[2mshould use default directory when MEMORY_DIR_PATH is not set
2026-01-25T22:07:57.7959559Z [22m[39mAttempting to connect to Neo4j at neo4j://localhost:7687
2026-01-25T22:07:57.7960086Z 
2026-01-25T22:07:57.8851324Z  [32m✓[39m __tests__/index.test.ts [2m([22m[2m8 tests[22m[2m)[22m[90m 43[2mms[22m[39m
2026-01-25T22:07:58.2754220Z  [32m✓[39m __tests__/relation-inverter.test.ts [2m([22m[2m7 tests[22m[2m)[22m[90m 7[2mms[22m[39m
2026-01-25T22:07:58.5347091Z  [32m✓[39m __tests__/neo4j-storage-adapter.test.ts [2m([22m[2m6 tests[22m[2m)[22m[90m 68[2mms[22m[39m
2026-01-25T22:07:59.2885210Z  [31m❯[39m __tests__/neo4j-e2e.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 3273[2mms[22m[39m
2026-01-25T22:07:59.2887212Z    [33m[2m✓[22m[39m Neo4j Storage Adapter E2E[2m > [22mConnection and Initialization[2m > [22mshould skip tests if Neo4j is not available [33m805[2mms[22m[39m
2026-01-25T22:07:59.2889380Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mEntity CRUD Operations[2m > [22mshould create and read entities[33m 723[2mms[22m[31m[39m
2026-01-25T22:07:59.2890706Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.2891756Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mEntity CRUD Operations[2m > [22mshould handle observations correctly[90m 52[2mms[22m[31m[39m
2026-01-25T22:07:59.2892927Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.2894053Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mEntity CRUD Operations[2m > [22mshould delete entities and cascade relations[90m 47[2mms[22m[31m[39m
2026-01-25T22:07:59.2894938Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.2895921Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mRelation CRUD Operations[2m > [22mshould create and read relations[90m 45[2mms[22m[31m[39m
2026-01-25T22:07:59.2896756Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.2897764Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mData Persistence[2m > [22mshould persist data across multiple operations[90m 41[2mms[22m[31m[39m
2026-01-25T22:07:59.2898570Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.2899534Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mPerformance and Scalability[2m > [22mshould handle large graphs efficiently[90m 44[2mms[22m[31m[39m
2026-01-25T22:07:59.2900690Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.2901645Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mPerformance and Scalability[2m > [22mshould handle concurrent operations[90m 68[2mms[22m[31m[39m
2026-01-25T22:07:59.2902787Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.2903669Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mSearch Operations[2m > [22mshould search nodes by query[90m 95[2mms[22m[31m[39m
2026-01-25T22:07:59.2904424Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.2905375Z [31m   [31m×[31m Neo4j Storage Adapter E2E[2m > [22mIntegration with save_memory[2m > [22mshould support save_memory operations[90m 58[2mms[22m[31m[39m
2026-01-25T22:07:59.2906187Z [31m     → Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5132948Z 
2026-01-25T22:07:59.5141622Z [31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 118 [27m[22m⎯⎯⎯⎯⎯⎯[39m
2026-01-25T22:07:59.5141959Z 
2026-01-25T22:07:59.5149804Z [31m[1m[7m FAIL [27m[22m[39m __tests__/analytics.test.ts[2m > [22mAnalytics - getAnalytics[2m > [22mshould return recent changes sorted chronologically
2026-01-25T22:07:59.5168009Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5169292Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5321805Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5323715Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5325971Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5327389Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5328400Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5329449Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5330135Z [90m [2m❯[22m __tests__/analytics.test.ts:[2m46:5[22m[39m
2026-01-25T22:07:59.5330408Z 
2026-01-25T22:07:59.5330653Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/118]⎯[22m[39m
2026-01-25T22:07:59.5330870Z 
2026-01-25T22:07:59.5331709Z [31m[1m[7m FAIL [27m[22m[39m __tests__/analytics.test.ts[2m > [22mAnalytics - getAnalytics[2m > [22mshould return top important entities by importance score
2026-01-25T22:07:59.5332962Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5333740Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5335410Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5337066Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5338809Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5340332Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5341361Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5342820Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5343817Z [90m [2m❯[22m __tests__/analytics.test.ts:[2m91:5[22m[39m
2026-01-25T22:07:59.5344068Z 
2026-01-25T22:07:59.5344294Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/118]⎯[22m[39m
2026-01-25T22:07:59.5344496Z 
2026-01-25T22:07:59.5345231Z [31m[1m[7m FAIL [27m[22m[39m __tests__/analytics.test.ts[2m > [22mAnalytics - getAnalytics[2m > [22mshould return most connected entities by relation count
2026-01-25T22:07:59.5346146Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5346880Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5355133Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5356785Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5358636Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5359963Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5360957Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5361882Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5362724Z [90m [2m❯[22m __tests__/analytics.test.ts:[2m156:5[22m[39m
2026-01-25T22:07:59.5362970Z 
2026-01-25T22:07:59.5363192Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/118]⎯[22m[39m
2026-01-25T22:07:59.5363380Z 
2026-01-25T22:07:59.5364075Z [31m[1m[7m FAIL [27m[22m[39m __tests__/analytics.test.ts[2m > [22mAnalytics - getAnalytics[2m > [22mshould identify orphaned entities with no relations
2026-01-25T22:07:59.5365168Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5365919Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5368264Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5369909Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5371724Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5373234Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5374227Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5375391Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5376281Z [90m [2m❯[22m __tests__/analytics.test.ts:[2m185:5[22m[39m
2026-01-25T22:07:59.5376533Z 
2026-01-25T22:07:59.5376764Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/118]⎯[22m[39m
2026-01-25T22:07:59.5376956Z 
2026-01-25T22:07:59.5377648Z [31m[1m[7m FAIL [27m[22m[39m __tests__/analytics.test.ts[2m > [22mAnalytics - getAnalytics[2m > [22mshould identify entities with broken relations
2026-01-25T22:07:59.5378565Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5379291Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5382705Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5383989Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5385635Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5386401Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5386968Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5387636Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5388203Z [90m [2m❯[22m __tests__/analytics.test.ts:[2m252:5[22m[39m
2026-01-25T22:07:59.5388444Z 
2026-01-25T22:07:59.5388671Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/118]⎯[22m[39m
2026-01-25T22:07:59.5388862Z 
2026-01-25T22:07:59.5389495Z [31m[1m[7m FAIL [27m[22m[39m __tests__/analytics.test.ts[2m > [22mAnalytics - getAnalytics[2m > [22mshould filter analytics by threadId
2026-01-25T22:07:59.5390355Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5391080Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5395336Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5396419Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5397835Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5398608Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5399188Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5400038Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5413228Z [90m [2m❯[22m __tests__/analytics.test.ts:[2m308:5[22m[39m
2026-01-25T22:07:59.5413675Z 
2026-01-25T22:07:59.5414150Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/118]⎯[22m[39m
2026-01-25T22:07:59.5414486Z 
2026-01-25T22:07:59.5415655Z [31m[1m[7m FAIL [27m[22m[39m __tests__/analytics.test.ts[2m > [22mAnalytics - getAnalytics[2m > [22mshould limit recent changes to 10 entities
2026-01-25T22:07:59.5417177Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5418471Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5420272Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5421856Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5423085Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5423859Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5424426Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5425082Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5425732Z [90m [2m❯[22m __tests__/analytics.test.ts:[2m341:5[22m[39m
2026-01-25T22:07:59.5426166Z 
2026-01-25T22:07:59.5426546Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/118]⎯[22m[39m
2026-01-25T22:07:59.5426870Z 
2026-01-25T22:07:59.5428507Z [31m[1m[7m FAIL [27m[22m[39m __tests__/edge-cases-coverage.test.ts[2m > [22mEdge Cases for Coverage[2m > [22mAnalytics Edge Cases[2m > [22mshould handle orphaned entities with broken relations
2026-01-25T22:07:59.5430574Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5431847Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5433623Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5434561Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5435585Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5436417Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5437488Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5438687Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5439795Z [90m [2m❯[22m __tests__/edge-cases-coverage.test.ts:[2m29:7[22m[39m
2026-01-25T22:07:59.5440302Z 
2026-01-25T22:07:59.5440727Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/118]⎯[22m[39m
2026-01-25T22:07:59.5441083Z 
2026-01-25T22:07:59.5442958Z [31m[1m[7m FAIL [27m[22m[39m __tests__/edge-cases-coverage.test.ts[2m > [22mEdge Cases for Coverage[2m > [22mAnalytics Edge Cases[2m > [22mshould handle entities with zero relations
2026-01-25T22:07:59.5444889Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5446290Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5448423Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5450062Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5451864Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5453436Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5454472Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5455655Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5456729Z [90m [2m❯[22m __tests__/edge-cases-coverage.test.ts:[2m69:7[22m[39m
2026-01-25T22:07:59.5457208Z 
2026-01-25T22:07:59.5457638Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/118]⎯[22m[39m
2026-01-25T22:07:59.5457986Z 
2026-01-25T22:07:59.5459698Z [31m[1m[7m FAIL [27m[22m[39m __tests__/edge-cases-coverage.test.ts[2m > [22mEdge Cases for Coverage[2m > [22mAnalytics Edge Cases[2m > [22mshould analyze entities with multiple observation versions
2026-01-25T22:07:59.5461578Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5463059Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5464861Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5466544Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5468442Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5470220Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5471287Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5472866Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5473981Z [90m [2m❯[22m __tests__/edge-cases-coverage.test.ts:[2m109:7[22m[39m
2026-01-25T22:07:59.5474467Z 
2026-01-25T22:07:59.5474878Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/118]⎯[22m[39m
2026-01-25T22:07:59.5475208Z 
2026-01-25T22:07:59.5476704Z [31m[1m[7m FAIL [27m[22m[39m __tests__/edge-cases-coverage.test.ts[2m > [22mEdge Cases for Coverage[2m > [22mQuery Edge Cases[2m > [22mshould handle query with all filters
2026-01-25T22:07:59.5478489Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5479950Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5481888Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5483804Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5485203Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5485976Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5486551Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5487205Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5488024Z [90m [2m❯[22m __tests__/edge-cases-coverage.test.ts:[2m169:7[22m[39m
2026-01-25T22:07:59.5488315Z 
2026-01-25T22:07:59.5488538Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/118]⎯[22m[39m
2026-01-25T22:07:59.5488733Z 
2026-01-25T22:07:59.5489835Z [31m[1m[7m FAIL [27m[22m[39m __tests__/edge-cases-coverage.test.ts[2m > [22mEdge Cases for Coverage[2m > [22mSearch Edge Cases[2m > [22mshould handle search with special regex characters
2026-01-25T22:07:59.5491623Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5493089Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5494880Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5495943Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5497637Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5498818Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5499836Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5500661Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5501314Z [90m [2m❯[22m __tests__/edge-cases-coverage.test.ts:[2m201:7[22m[39m
2026-01-25T22:07:59.5501597Z 
2026-01-25T22:07:59.5501812Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/118]⎯[22m[39m
2026-01-25T22:07:59.5501998Z 
2026-01-25T22:07:59.5503131Z [31m[1m[7m FAIL [27m[22m[39m __tests__/edge-cases-coverage.test.ts[2m > [22mEdge Cases for Coverage[2m > [22mSearch Edge Cases[2m > [22mshould handle case-insensitive search
2026-01-25T22:07:59.5505279Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5506577Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5508365Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5510419Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5512392Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5513730Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5514948Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5515688Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5516320Z [90m [2m❯[22m __tests__/edge-cases-coverage.test.ts:[2m227:7[22m[39m
2026-01-25T22:07:59.5516627Z 
2026-01-25T22:07:59.5516847Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/118]⎯[22m[39m
2026-01-25T22:07:59.5517040Z 
2026-01-25T22:07:59.5518084Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mgetMemoryStats[2m > [22mshould return correct stats for populated graph
2026-01-25T22:07:59.5519213Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5519956Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5520977Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5521901Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5523191Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5523962Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5525000Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5526146Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5527337Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m39:7[22m[39m
2026-01-25T22:07:59.5527791Z 
2026-01-25T22:07:59.5528048Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/118]⎯[22m[39m
2026-01-25T22:07:59.5528238Z 
2026-01-25T22:07:59.5530355Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mgetRecentChanges[2m > [22mshould return entities modified after specified date
2026-01-25T22:07:59.5532398Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5533278Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5534310Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5535219Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5536241Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5537003Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5537561Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5538522Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5539669Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m99:7[22m[39m
2026-01-25T22:07:59.5540222Z 
2026-01-25T22:07:59.5540609Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/118]⎯[22m[39m
2026-01-25T22:07:59.5540936Z 
2026-01-25T22:07:59.5542908Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mgetRecentChanges[2m > [22mshould include relations with recent timestamps
2026-01-25T22:07:59.5545058Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5546787Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5548806Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5550599Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5552799Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5554286Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5555399Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5556682Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5558034Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m127:7[22m[39m
2026-01-25T22:07:59.5558685Z 
2026-01-25T22:07:59.5559150Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/118]⎯[22m[39m
2026-01-25T22:07:59.5559515Z 
2026-01-25T22:07:59.5561542Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mfindRelationPath[2m > [22mshould return empty path when no connection exists
2026-01-25T22:07:59.5563988Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5565423Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5567403Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5569327Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5571574Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5573293Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5574411Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5575716Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5577052Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m183:7[22m[39m
2026-01-25T22:07:59.5577688Z 
2026-01-25T22:07:59.5578135Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/118]⎯[22m[39m
2026-01-25T22:07:59.5578497Z 
2026-01-25T22:07:59.5580630Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mfindRelationPath[2m > [22mshould find direct path between connected entities
2026-01-25T22:07:59.5583102Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5584534Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5586539Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5588298Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5590291Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5591732Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5593338Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5594663Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5596015Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m223:7[22m[39m
2026-01-25T22:07:59.5596663Z 
2026-01-25T22:07:59.5597113Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/118]⎯[22m[39m
2026-01-25T22:07:59.5597470Z 
2026-01-25T22:07:59.5599298Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mfindRelationPath[2m > [22mshould respect maxDepth parameter
2026-01-25T22:07:59.5601396Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5603141Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5605114Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5606738Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5608733Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5610141Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5611254Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5612706Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5613995Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m293:7[22m[39m
2026-01-25T22:07:59.5614943Z 
2026-01-25T22:07:59.5615434Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/118]⎯[22m[39m
2026-01-25T22:07:59.5615799Z 
2026-01-25T22:07:59.5617863Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mdetectConflicts[2m > [22mshould detect no conflicts in consistent observations
2026-01-25T22:07:59.5620160Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5621563Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5623742Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5625522Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5627517Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5629036Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5630120Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5631390Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5632948Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m334:7[22m[39m
2026-01-25T22:07:59.5633598Z 
2026-01-25T22:07:59.5634104Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/118]⎯[22m[39m
2026-01-25T22:07:59.5634504Z 
2026-01-25T22:07:59.5636484Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mdetectConflicts[2m > [22mshould detect conflicts with negation words
2026-01-25T22:07:59.5638979Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5640445Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5642621Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5644432Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5646457Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5647906Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5649007Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5650334Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5651722Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m367:7[22m[39m
2026-01-25T22:07:59.5652578Z 
2026-01-25T22:07:59.5653038Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/118]⎯[22m[39m
2026-01-25T22:07:59.5653399Z 
2026-01-25T22:07:59.5655408Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mpruneMemory[2m > [22mshould not remove entities when no criteria match
2026-01-25T22:07:59.5657584Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5659009Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5661017Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5663363Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5665358Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5666790Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5667875Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5669177Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5670520Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m406:7[22m[39m
2026-01-25T22:07:59.5671160Z 
2026-01-25T22:07:59.5671617Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/118]⎯[22m[39m
2026-01-25T22:07:59.5671980Z 
2026-01-25T22:07:59.5674173Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mpruneMemory[2m > [22mshould remove old low-importance entities
2026-01-25T22:07:59.5676304Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5677762Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5679760Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5681629Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5683815Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5685547Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5686709Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5687987Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5689304Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m435:7[22m[39m
2026-01-25T22:07:59.5689946Z 
2026-01-25T22:07:59.5690393Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/118]⎯[22m[39m
2026-01-25T22:07:59.5690755Z 
2026-01-25T22:07:59.5692894Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mpruneMemory[2m > [22mshould respect keepMinEntities parameter
2026-01-25T22:07:59.5695025Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5696473Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5698533Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5700333Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5702494Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5703963Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5705058Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5706342Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5707687Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m465:7[22m[39m
2026-01-25T22:07:59.5708581Z 
2026-01-25T22:07:59.5709048Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/118]⎯[22m[39m
2026-01-25T22:07:59.5709395Z 
2026-01-25T22:07:59.5711294Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mbulkUpdate[2m > [22mshould update multiple entities at once
2026-01-25T22:07:59.5713668Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5715111Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5717078Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5718903Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5720892Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5722581Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5723703Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5724982Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5726333Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m512:7[22m[39m
2026-01-25T22:07:59.5726981Z 
2026-01-25T22:07:59.5727418Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/118]⎯[22m[39m
2026-01-25T22:07:59.5727773Z 
2026-01-25T22:07:59.5729802Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mbulkUpdate[2m > [22mshould report not found entities
2026-01-25T22:07:59.5731784Z [31m[1mTypeError[22m: updates is not iterable[39m
2026-01-25T22:07:59.5733411Z [36m [2m❯[22m Module.bulkUpdate lib/maintenance/bulk-updater.ts:[2m27:24[22m[39m
2026-01-25T22:07:59.5734693Z     [90m 25| [39m  [35mconst[39m notFound[33m:[39m string[] [33m=[39m [][33m;[39m
2026-01-25T22:07:59.5735536Z     [90m 26| [39m  
2026-01-25T22:07:59.5736291Z     [90m 27| [39m  [35mfor[39m ([35mconst[39m update [35mof[39m updates) {
2026-01-25T22:07:59.5737153Z     [90m   | [39m                       [31m^[39m
2026-01-25T22:07:59.5738751Z     [90m 28| [39m    [35mconst[39m entity [33m=[39m graph[33m.[39mentities[33m.[39m[34mfind[39m(e [33m=>[39m e[33m.[39mname [33m===[39m update[33m.[39mentityNa…
2026-01-25T22:07:59.5740101Z     [90m 29| [39m    [35mif[39m ([33m![39mentity) {
2026-01-25T22:07:59.5741211Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m562:22[22m[39m
2026-01-25T22:07:59.5741890Z 
2026-01-25T22:07:59.5742532Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/118]⎯[22m[39m
2026-01-25T22:07:59.5742905Z 
2026-01-25T22:07:59.5744828Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mbulkUpdate[2m > [22mshould add observations during bulk update
2026-01-25T22:07:59.5746992Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5748405Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5750376Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5752365Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5754372Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5756137Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5757212Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5758452Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5759778Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m571:7[22m[39m
2026-01-25T22:07:59.5760425Z 
2026-01-25T22:07:59.5760873Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/118]⎯[22m[39m
2026-01-25T22:07:59.5761235Z 
2026-01-25T22:07:59.5763218Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mflagForReview[2m > [22mshould flag entity for review
2026-01-25T22:07:59.5765357Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5766787Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5768742Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5770439Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5772646Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5774148Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5775267Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5776783Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5778174Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m606:7[22m[39m
2026-01-25T22:07:59.5778780Z 
2026-01-25T22:07:59.5779216Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/118]⎯[22m[39m
2026-01-25T22:07:59.5779559Z 
2026-01-25T22:07:59.5781488Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mflagForReview[2m > [22mshould include reviewer when provided
2026-01-25T22:07:59.5783745Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5785108Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5787028Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5788729Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5790620Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5792025Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5793271Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5794487Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5795775Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m632:7[22m[39m
2026-01-25T22:07:59.5796381Z 
2026-01-25T22:07:59.5796776Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/118]⎯[22m[39m
2026-01-25T22:07:59.5797111Z 
2026-01-25T22:07:59.5799188Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mgetFlaggedEntities[2m > [22mshould return empty array when no entities are flagged
2026-01-25T22:07:59.5801649Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5803161Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5805057Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5806768Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5808664Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5810115Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5811187Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5812585Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5813870Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m665:7[22m[39m
2026-01-25T22:07:59.5814485Z 
2026-01-25T22:07:59.5814883Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/118]⎯[22m[39m
2026-01-25T22:07:59.5815223Z 
2026-01-25T22:07:59.5817243Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mgetContext[2m > [22mshould retrieve entities and relations within specified depth
2026-01-25T22:07:59.5819386Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5820948Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5823093Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5824804Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5826746Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5828158Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5829220Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5830428Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5831719Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m691:7[22m[39m
2026-01-25T22:07:59.5832504Z 
2026-01-25T22:07:59.5832910Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/118]⎯[22m[39m
2026-01-25T22:07:59.5833254Z 
2026-01-25T22:07:59.5834988Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mgetContext[2m > [22mshould respect depth parameter
2026-01-25T22:07:59.5836999Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5838360Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5840254Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5841961Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5844366Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5845772Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5846826Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5848032Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5849295Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m767:7[22m[39m
2026-01-25T22:07:59.5849888Z 
2026-01-25T22:07:59.5850287Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/118]⎯[22m[39m
2026-01-25T22:07:59.5850620Z 
2026-01-25T22:07:59.5852753Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mgetContext[2m > [22mshould expand context through multiple depth levels
2026-01-25T22:07:59.5854874Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5856225Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5858124Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5859817Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5861727Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5863373Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5864694Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5865991Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5867260Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m809:7[22m[39m
2026-01-25T22:07:59.5867912Z 
2026-01-25T22:07:59.5868308Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/118]⎯[22m[39m
2026-01-25T22:07:59.5868642Z 
2026-01-25T22:07:59.5870590Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph-manager-extended.test.ts[2m > [22mKnowledgeGraphManager - Extended Coverage[2m > [22mlistConversations[2m > [22mshould list all conversations with metadata
2026-01-25T22:07:59.5872870Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5874214Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5876118Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5878004Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5879900Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5881365Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5882569Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5883785Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5885033Z [90m [2m❯[22m __tests__/knowledge-graph-manager-extended.test.ts:[2m851:7[22m[39m
2026-01-25T22:07:59.5885563Z 
2026-01-25T22:07:59.5885930Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/118]⎯[22m[39m
2026-01-25T22:07:59.5886223Z 
2026-01-25T22:07:59.5887870Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateEntities with metadata[2m > [22mshould create new entities with all metadata fields
2026-01-25T22:07:59.5889648Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5890862Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5892828Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5894435Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5896557Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5898039Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5899092Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5900326Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5901405Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m55:27[22m[39m
2026-01-25T22:07:59.5901865Z 
2026-01-25T22:07:59.5902727Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/118]⎯[22m[39m
2026-01-25T22:07:59.5903100Z 
2026-01-25T22:07:59.5905028Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateEntities with metadata[2m > [22mshould not create duplicate entities
2026-01-25T22:07:59.5907294Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5908746Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5910714Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5912736Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5914716Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5916186Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5917274Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5918574Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5920013Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m79:7[22m[39m
2026-01-25T22:07:59.5920500Z 
2026-01-25T22:07:59.5920949Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/118]⎯[22m[39m
2026-01-25T22:07:59.5921299Z 
2026-01-25T22:07:59.5923362Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateEntities with metadata[2m > [22mshould handle empty entity arrays
2026-01-25T22:07:59.5925445Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5926875Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5928819Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5930615Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5932820Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5934311Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5935398Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5936681Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5937817Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m89:27[22m[39m
2026-01-25T22:07:59.5938301Z 
2026-01-25T22:07:59.5938750Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/118]⎯[22m[39m
2026-01-25T22:07:59.5939110Z 
2026-01-25T22:07:59.5941352Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateRelations with metadata[2m > [22mshould create new relations with all metadata fields
2026-01-25T22:07:59.5943808Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5945249Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5947225Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5949025Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5950989Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5952665Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5953802Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5955061Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5956194Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m96:7[22m[39m
2026-01-25T22:07:59.5956682Z 
2026-01-25T22:07:59.5957133Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/118]⎯[22m[39m
2026-01-25T22:07:59.5957479Z 
2026-01-25T22:07:59.5959362Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mcreateRelations with metadata[2m > [22mshould not create duplicate relations
2026-01-25T22:07:59.5961437Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5963127Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5965109Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5967194Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5969134Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5970601Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5971723Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5973254Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5974436Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m141:7[22m[39m
2026-01-25T22:07:59.5974919Z 
2026-01-25T22:07:59.5975404Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/118]⎯[22m[39m
2026-01-25T22:07:59.5975758Z 
2026-01-25T22:07:59.5977830Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mMulti-thread file storage[2m > [22mshould store entities from different threads in separate files
2026-01-25T22:07:59.5980116Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.5981569Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.5983781Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5985537Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.5987853Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.5989336Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.5990419Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.5991762Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.5993226Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m210:7[22m[39m
2026-01-25T22:07:59.5993794Z 
2026-01-25T22:07:59.5994303Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/118]⎯[22m[39m
2026-01-25T22:07:59.5994646Z 
2026-01-25T22:07:59.5996656Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mMulti-thread file storage[2m > [22mshould store relations from different threads in separate files
2026-01-25T22:07:59.5999001Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6000433Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6002589Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6004377Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6006374Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6007881Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6008972Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6010457Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6011584Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m231:7[22m[39m
2026-01-25T22:07:59.6012261Z 
2026-01-25T22:07:59.6012717Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/118]⎯[22m[39m
2026-01-25T22:07:59.6013085Z 
2026-01-25T22:07:59.6015101Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22maddObservations with metadata[2m > [22mshould add observations and update entity metadata
2026-01-25T22:07:59.6017340Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6018757Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6020737Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6022727Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6024742Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6026240Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6027341Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6028606Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6029736Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m306:7[22m[39m
2026-01-25T22:07:59.6030214Z 
2026-01-25T22:07:59.6030672Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/118]⎯[22m[39m
2026-01-25T22:07:59.6031032Z 
2026-01-25T22:07:59.6033376Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22maddObservations with metadata[2m > [22mshould not add duplicate observations
2026-01-25T22:07:59.6035581Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6037012Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6038990Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6040774Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6042933Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6044473Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6045553Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6046813Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6047977Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m350:7[22m[39m
2026-01-25T22:07:59.6048480Z 
2026-01-25T22:07:59.6048931Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/118]⎯[22m[39m
2026-01-25T22:07:59.6049286Z 
2026-01-25T22:07:59.6051217Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22maddObservations with metadata[2m > [22mshould throw error for non-existent entity
2026-01-25T22:07:59.6054404Z [31m[1mAssertionError[22m: expected [Function] to throw error including 'Entity with name NonExistent not found' but got 'Cannot read properties of undefined (…'[39m
2026-01-25T22:07:59.6055784Z 
2026-01-25T22:07:59.6056390Z Expected: [32m"Entity with name NonExistent not found"[39m
2026-01-25T22:07:59.6057501Z Received: [31m"Cannot read properties of undefined (reading 'map')"[39m
2026-01-25T22:07:59.6058040Z 
2026-01-25T22:07:59.6058626Z [36m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m398:7[22m[39m
2026-01-25T22:07:59.6059511Z     [90m396| [39m      ][33m;[39m
2026-01-25T22:07:59.6060018Z     [90m397| [39m
2026-01-25T22:07:59.6061400Z     [90m398| [39m      [35mawait[39m [34mexpect[39m(manager[33m.[39m[34maddObservations[39m(observations))[33m.[39mrejects[33m.[39m[34mtoTh[39m…
2026-01-25T22:07:59.6062888Z     [90m   | [39m      [31m^[39m
2026-01-25T22:07:59.6063433Z     [90m399| [39m    })[33m;[39m
2026-01-25T22:07:59.6063905Z     [90m400| [39m  })[33m;[39m
2026-01-25T22:07:59.6064167Z 
2026-01-25T22:07:59.6064531Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/118]⎯[22m[39m
2026-01-25T22:07:59.6064839Z 
2026-01-25T22:07:59.6066477Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mdeleteEntities[2m > [22mshould delete entities and associated relations
2026-01-25T22:07:59.6068392Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6069741Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6071683Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6073665Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6075687Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6077486Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6078636Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6079938Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6081176Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m404:7[22m[39m
2026-01-25T22:07:59.6081652Z 
2026-01-25T22:07:59.6082258Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/118]⎯[22m[39m
2026-01-25T22:07:59.6082640Z 
2026-01-25T22:07:59.6084548Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22msearchNodes[2m > [22mshould search entities by name, type, and observations
2026-01-25T22:07:59.6086648Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6088101Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6090103Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6091886Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6094139Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6095594Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6096714Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6098001Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6099136Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m448:7[22m[39m
2026-01-25T22:07:59.6099925Z 
2026-01-25T22:07:59.6100400Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/118]⎯[22m[39m
2026-01-25T22:07:59.6100755Z 
2026-01-25T22:07:59.6102757Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mopenNodes[2m > [22mshould retrieve specific entities by name
2026-01-25T22:07:59.6104774Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6106225Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6108195Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6110005Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6111985Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6113694Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6114810Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6116071Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6117235Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m510:7[22m[39m
2026-01-25T22:07:59.6117702Z 
2026-01-25T22:07:59.6118112Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/118]⎯[22m[39m
2026-01-25T22:07:59.6118447Z 
2026-01-25T22:07:59.6120316Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould filter by timestamp range
2026-01-25T22:07:59.6124209Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould filter by confidence range
2026-01-25T22:07:59.6127581Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould filter by importance range
2026-01-25T22:07:59.6130829Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould filter by multiple range criteria
2026-01-25T22:07:59.6134538Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould include relations when both entities pass filter
2026-01-25T22:07:59.6138061Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould return all data when no filters provided
2026-01-25T22:07:59.6141548Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mqueryNodes with range filtering[2m > [22mshould return empty result when no data matches filters
2026-01-25T22:07:59.6143888Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6145282Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6147203Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6148923Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6151084Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6152707Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6153784Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6155007Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6156098Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m540:7[22m[39m
2026-01-25T22:07:59.6156559Z 
2026-01-25T22:07:59.6156960Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/118]⎯[22m[39m
2026-01-25T22:07:59.6157300Z 
2026-01-25T22:07:59.6159473Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mCross-thread operations[2m > [22mshould maintain single entity when observations added from different thread
2026-01-25T22:07:59.6161724Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6163273Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6165181Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6166883Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6168808Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6170212Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6171457Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6172857Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6173947Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m686:7[22m[39m
2026-01-25T22:07:59.6174403Z 
2026-01-25T22:07:59.6174805Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[49/118]⎯[22m[39m
2026-01-25T22:07:59.6175140Z 
2026-01-25T22:07:59.6176947Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistConversations[2m > [22mshould list single conversation with correct metadata
2026-01-25T22:07:59.6178769Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6180123Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6181997Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6184004Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6185945Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6187459Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6188575Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6189738Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6190780Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m734:7[22m[39m
2026-01-25T22:07:59.6191256Z 
2026-01-25T22:07:59.6191700Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[50/118]⎯[22m[39m
2026-01-25T22:07:59.6192523Z 
2026-01-25T22:07:59.6194513Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistConversations[2m > [22mshould list multiple conversations sorted by last updated
2026-01-25T22:07:59.6196667Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6198029Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6199857Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6201651Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6203856Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6205320Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6206338Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6207501Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6208621Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m780:7[22m[39m
2026-01-25T22:07:59.6209095Z 
2026-01-25T22:07:59.6209514Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[51/118]⎯[22m[39m
2026-01-25T22:07:59.6209876Z 
2026-01-25T22:07:59.6211877Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistConversations[2m > [22mshould count both entities and relations from the same thread
2026-01-25T22:07:59.6214441Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6215786Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6217741Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6219505Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6221491Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6223148Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6224157Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6225327Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6226460Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m843:7[22m[39m
2026-01-25T22:07:59.6226936Z 
2026-01-25T22:07:59.6227360Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[52/118]⎯[22m[39m
2026-01-25T22:07:59.6227709Z 
2026-01-25T22:07:59.6229825Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistConversations[2m > [22mshould handle threads with only relations (no entities from that thread)
2026-01-25T22:07:59.6232293Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6233639Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6235466Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6237249Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6239518Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6241000Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6242239Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6243405Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6244461Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m907:7[22m[39m
2026-01-25T22:07:59.6244947Z 
2026-01-25T22:07:59.6245376Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[53/118]⎯[22m[39m
2026-01-25T22:07:59.6245719Z 
2026-01-25T22:07:59.6247956Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould list all entities from a thread when only threadId is provided
2026-01-25T22:07:59.6251114Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould filter by threadId
2026-01-25T22:07:59.6254213Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould filter by entityType
2026-01-25T22:07:59.6257274Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould filter by namePattern (case-insensitive)
2026-01-25T22:07:59.6260291Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould combine multiple filters
2026-01-25T22:07:59.6263521Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould return empty array when no matches
2026-01-25T22:07:59.6266560Z [31m[1m[7m FAIL [27m[22m[39m __tests__/knowledge-graph.test.ts[2m > [22mKnowledgeGraphManager - Enhanced with Metadata[2m > [22mlistEntities[2m > [22mshould return only name and entityType fields
2026-01-25T22:07:59.6268567Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6270008Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6271957Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6273955Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6276231Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6277716Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6278823Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6280148Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6281286Z [90m [2m❯[22m __tests__/knowledge-graph.test.ts:[2m998:7[22m[39m
2026-01-25T22:07:59.6281767Z 
2026-01-25T22:07:59.6282429Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[54/118]⎯[22m[39m
2026-01-25T22:07:59.6282795Z 
2026-01-25T22:07:59.6284250Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mEntity CRUD Operations[2m > [22mshould create and read entities
2026-01-25T22:07:59.6286073Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6287501Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6289488Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6291224Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6293414Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6294908Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6296265Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6297603Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6298674Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m67:7[22m[39m
2026-01-25T22:07:59.6299108Z 
2026-01-25T22:07:59.6299529Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[55/118]⎯[22m[39m
2026-01-25T22:07:59.6299876Z 
2026-01-25T22:07:59.6301374Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mEntity CRUD Operations[2m > [22mshould handle observations correctly
2026-01-25T22:07:59.6303431Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6304872Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6306869Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6308653Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6310621Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6312341Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6313476Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6314762Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6315813Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m98:7[22m[39m
2026-01-25T22:07:59.6316236Z 
2026-01-25T22:07:59.6316662Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[56/118]⎯[22m[39m
2026-01-25T22:07:59.6316995Z 
2026-01-25T22:07:59.6318593Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mEntity CRUD Operations[2m > [22mshould delete entities and cascade relations
2026-01-25T22:07:59.6320750Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6322381Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6324358Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6326115Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6328097Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6329584Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6330710Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6331968Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6333257Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m114:7[22m[39m
2026-01-25T22:07:59.6333698Z 
2026-01-25T22:07:59.6334117Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[57/118]⎯[22m[39m
2026-01-25T22:07:59.6334452Z 
2026-01-25T22:07:59.6335952Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mRelation CRUD Operations[2m > [22mshould create and read relations
2026-01-25T22:07:59.6337783Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6339214Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6341504Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6343548Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6345495Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6346872Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6347881Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6349032Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6349976Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m138:7[22m[39m
2026-01-25T22:07:59.6350387Z 
2026-01-25T22:07:59.6350809Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[58/118]⎯[22m[39m
2026-01-25T22:07:59.6351141Z 
2026-01-25T22:07:59.6352834Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mData Persistence[2m > [22mshould persist data across multiple operations
2026-01-25T22:07:59.6354667Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6356360Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6358329Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6360057Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6362017Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6363973Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6365050Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6366288Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6367325Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m156:7[22m[39m
2026-01-25T22:07:59.6367729Z 
2026-01-25T22:07:59.6368126Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[59/118]⎯[22m[39m
2026-01-25T22:07:59.6368446Z 
2026-01-25T22:07:59.6369933Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mPerformance and Scalability[2m > [22mshould handle large graphs efficiently
2026-01-25T22:07:59.6371682Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6373599Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6375469Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6377232Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6379173Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6380751Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6382379Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6383807Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6385358Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m187:7[22m[39m
2026-01-25T22:07:59.6385926Z 
2026-01-25T22:07:59.6386425Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[60/118]⎯[22m[39m
2026-01-25T22:07:59.6387223Z 
2026-01-25T22:07:59.6388882Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mPerformance and Scalability[2m > [22mshould handle concurrent operations
2026-01-25T22:07:59.6391066Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6392791Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6395087Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6397181Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6399538Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6401085Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6402683Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6403974Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6405087Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m206:7[22m[39m
2026-01-25T22:07:59.6405540Z 
2026-01-25T22:07:59.6405991Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[61/118]⎯[22m[39m
2026-01-25T22:07:59.6406652Z 
2026-01-25T22:07:59.6408076Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mSearch Operations[2m > [22mshould search nodes by query
2026-01-25T22:07:59.6410152Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6411951Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6414576Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6416411Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6418736Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6420546Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6421981Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6423792Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6424979Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m256:7[22m[39m
2026-01-25T22:07:59.6425427Z 
2026-01-25T22:07:59.6426141Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[62/118]⎯[22m[39m
2026-01-25T22:07:59.6426521Z 
2026-01-25T22:07:59.6428371Z [31m[1m[7m FAIL [27m[22m[39m __tests__/neo4j-e2e.test.ts[2m > [22mNeo4j Storage Adapter E2E[2m > [22mIntegration with save_memory[2m > [22mshould support save_memory operations
2026-01-25T22:07:59.6430543Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6432271Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6434581Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6436934Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6439279Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6441112Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6442439Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6444053Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6445440Z [90m [2m❯[22m __tests__/neo4j-e2e.test.ts:[2m317:7[22m[39m
2026-01-25T22:07:59.6445898Z 
2026-01-25T22:07:59.6446374Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[63/118]⎯[22m[39m
2026-01-25T22:07:59.6446726Z 
2026-01-25T22:07:59.6448705Z [31m[1m[7m FAIL [27m[22m[39m __tests__/observation-history.test.ts[2m > [22mObservation Versioning - getObservationHistory[2m > [22mshould throw error for non-existent observation
2026-01-25T22:07:59.6451001Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6452936Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6455235Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6457340Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6459610Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6461393Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6463041Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6464659Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6466186Z [90m [2m❯[22m __tests__/observation-history.test.ts:[2m58:5[22m[39m
2026-01-25T22:07:59.6466709Z 
2026-01-25T22:07:59.6467180Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[64/118]⎯[22m[39m
2026-01-25T22:07:59.6467916Z 
2026-01-25T22:07:59.6469875Z [31m[1m[7m FAIL [27m[22m[39m __tests__/observation-history.test.ts[2m > [22mObservation Versioning - getObservationHistory[2m > [22mshould handle observation with no version chain
2026-01-25T22:07:59.6472317Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6473797Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6475502Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6476984Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6478548Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6479887Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6480857Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6482006Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6483258Z [90m [2m❯[22m __tests__/observation-history.test.ts:[2m84:5[22m[39m
2026-01-25T22:07:59.6483736Z 
2026-01-25T22:07:59.6484116Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[65/118]⎯[22m[39m
2026-01-25T22:07:59.6484681Z 
2026-01-25T22:07:59.6486208Z [31m[1m[7m FAIL [27m[22m[39m __tests__/observation-history.test.ts[2m > [22mObservation Versioning - getObservationHistory[2m > [22mshould traverse version chain forwards (superseded_by)
2026-01-25T22:07:59.6487708Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6488914Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6490632Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6492325Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6494439Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6496276Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6497453Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6499053Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6500282Z [90m [2m❯[22m __tests__/observation-history.test.ts:[2m132:5[22m[39m
2026-01-25T22:07:59.6501097Z 
2026-01-25T22:07:59.6501568Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[66/118]⎯[22m[39m
2026-01-25T22:07:59.6501934Z 
2026-01-25T22:07:59.6503946Z [31m[1m[7m FAIL [27m[22m[39m __tests__/observation-history.test.ts[2m > [22mObservation Versioning - getObservationHistory[2m > [22mshould traverse version chain backwards (supersedes)
2026-01-25T22:07:59.6505985Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6507484Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6509816Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6511673Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6514026Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6515596Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6516767Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6518136Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6519380Z [90m [2m❯[22m __tests__/observation-history.test.ts:[2m182:5[22m[39m
2026-01-25T22:07:59.6519919Z 
2026-01-25T22:07:59.6520371Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[67/118]⎯[22m[39m
2026-01-25T22:07:59.6520739Z 
2026-01-25T22:07:59.6522527Z [31m[1m[7m FAIL [27m[22m[39m __tests__/observation-history.test.ts[2m > [22mObservation Versioning - getObservationHistory[2m > [22mshould handle mid-chain starting point
2026-01-25T22:07:59.6524422Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6525883Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6527863Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6529665Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6531885Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6533693Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6534789Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6536075Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6537299Z [90m [2m❯[22m __tests__/observation-history.test.ts:[2m232:5[22m[39m
2026-01-25T22:07:59.6537810Z 
2026-01-25T22:07:59.6538235Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[68/118]⎯[22m[39m
2026-01-25T22:07:59.6538582Z 
2026-01-25T22:07:59.6540274Z [31m[1m[7m FAIL [27m[22m[39m __tests__/observation-history.test.ts[2m > [22mObservation Versioning - getObservationHistory[2m > [22mshould return observations in version chain order
2026-01-25T22:07:59.6562555Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6564083Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6566043Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6567871Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6569859Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6571368Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6572707Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6574312Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6575526Z [90m [2m❯[22m __tests__/observation-history.test.ts:[2m273:5[22m[39m
2026-01-25T22:07:59.6576062Z 
2026-01-25T22:07:59.6576517Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[69/118]⎯[22m[39m
2026-01-25T22:07:59.6576873Z 
2026-01-25T22:07:59.6578586Z [31m[1m[7m FAIL [27m[22m[39m __tests__/observation-history.test.ts[2m > [22mObservation Versioning - getObservationHistory[2m > [22mshould include all observation fields in history
2026-01-25T22:07:59.6580653Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6582329Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6584362Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6586219Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6588225Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6589738Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6590868Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6592361Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6593573Z [90m [2m❯[22m __tests__/observation-history.test.ts:[2m305:5[22m[39m
2026-01-25T22:07:59.6594113Z 
2026-01-25T22:07:59.6594574Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[70/118]⎯[22m[39m
2026-01-25T22:07:59.6594934Z 
2026-01-25T22:07:59.6596875Z [31m[1m[7m FAIL [27m[22m[39m __tests__/save-memory-integration.test.ts[2m > [22mSave Memory Handler - Integration Tests[2m > [22mshould successfully save valid entities with relations
2026-01-25T22:07:59.6598904Z [31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m
2026-01-25T22:07:59.6599510Z 
2026-01-25T22:07:59.6599784Z [32m- Expected[39m
2026-01-25T22:07:59.6600256Z [31m+ Received[39m
2026-01-25T22:07:59.6600495Z 
2026-01-25T22:07:59.6600690Z [32m- true[39m
2026-01-25T22:07:59.6601098Z [31m+ false[39m
2026-01-25T22:07:59.6601307Z 
2026-01-25T22:07:59.6601989Z [36m [2m❯[22m __tests__/save-memory-integration.test.ts:[2m59:28[22m[39m
2026-01-25T22:07:59.6603068Z     [90m 57| [39m    )[33m;[39m
2026-01-25T22:07:59.6603555Z     [90m 58| [39m
2026-01-25T22:07:59.6604582Z     [90m 59| [39m    [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6605701Z     [90m   | [39m                           [31m^[39m
2026-01-25T22:07:59.6607039Z     [90m 60| [39m    [34mexpect[39m(result[33m.[39mcreated[33m.[39mentities)[33m.[39m[34mtoBe[39m([34m2[39m)[33m;[39m
2026-01-25T22:07:59.6609111Z     [90m 61| [39m    [34mexpect[39m(result[33m.[39mcreated[33m.[39mrelations)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m [90m// Includes b[39m…
2026-01-25T22:07:59.6610123Z 
2026-01-25T22:07:59.6610617Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[71/118]⎯[22m[39m
2026-01-25T22:07:59.6610984Z 
2026-01-25T22:07:59.6612891Z [31m[1m[7m FAIL [27m[22m[39m __tests__/save-memory-integration.test.ts[2m > [22mSave Memory Handler - Integration Tests[2m > [22mshould apply default confidence and importance values
2026-01-25T22:07:59.6614868Z [31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m
2026-01-25T22:07:59.6615480Z 
2026-01-25T22:07:59.6615747Z [32m- Expected[39m
2026-01-25T22:07:59.6616216Z [31m+ Received[39m
2026-01-25T22:07:59.6616442Z 
2026-01-25T22:07:59.6616648Z [32m- true[39m
2026-01-25T22:07:59.6617382Z [31m+ false[39m
2026-01-25T22:07:59.6617601Z 
2026-01-25T22:07:59.6618282Z [36m [2m❯[22m __tests__/save-memory-integration.test.ts:[2m182:28[22m[39m
2026-01-25T22:07:59.6619092Z     [90m180| [39m    )[33m;[39m
2026-01-25T22:07:59.6619606Z     [90m181| [39m
2026-01-25T22:07:59.6620616Z     [90m182| [39m    [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6621726Z     [90m   | [39m                           [31m^[39m
2026-01-25T22:07:59.6622538Z     [90m183| [39m    
2026-01-25T22:07:59.6623234Z     [90m184| [39m    [90m// Verify defaults were applied[39m
2026-01-25T22:07:59.6623673Z 
2026-01-25T22:07:59.6624145Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[72/118]⎯[22m[39m
2026-01-25T22:07:59.6624498Z 
2026-01-25T22:07:59.6626184Z [31m[1m[7m FAIL [27m[22m[39m __tests__/save-memory-integration.test.ts[2m > [22mSave Memory Handler - Integration Tests[2m > [22mshould respect custom confidence and importance values
2026-01-25T22:07:59.6628176Z [31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m
2026-01-25T22:07:59.6628792Z 
2026-01-25T22:07:59.6629053Z [32m- Expected[39m
2026-01-25T22:07:59.6629521Z [31m+ Received[39m
2026-01-25T22:07:59.6629751Z 
2026-01-25T22:07:59.6629963Z [32m- true[39m
2026-01-25T22:07:59.6630363Z [31m+ false[39m
2026-01-25T22:07:59.6630564Z 
2026-01-25T22:07:59.6631251Z [36m [2m❯[22m __tests__/save-memory-integration.test.ts:[2m223:28[22m[39m
2026-01-25T22:07:59.6632317Z     [90m221| [39m    )[33m;[39m
2026-01-25T22:07:59.6632832Z     [90m222| [39m
2026-01-25T22:07:59.6633908Z     [90m223| [39m    [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6635028Z     [90m   | [39m                           [31m^[39m
2026-01-25T22:07:59.6635609Z     [90m224| [39m    
2026-01-25T22:07:59.6636320Z     [90m225| [39m    [90m// Verify custom values were applied[39m
2026-01-25T22:07:59.6636862Z 
2026-01-25T22:07:59.6637545Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[73/118]⎯[22m[39m
2026-01-25T22:07:59.6637935Z 
2026-01-25T22:07:59.6639505Z [31m[1m[7m FAIL [27m[22m[39m __tests__/save-memory-integration.test.ts[2m > [22mSave Memory Handler - Integration Tests[2m > [22mshould create bidirectional relations
2026-01-25T22:07:59.6641403Z [31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m
2026-01-25T22:07:59.6642027Z 
2026-01-25T22:07:59.6642758Z [32m- Expected[39m
2026-01-25T22:07:59.6643244Z [31m+ Received[39m
2026-01-25T22:07:59.6643495Z 
2026-01-25T22:07:59.6643732Z [32m- true[39m
2026-01-25T22:07:59.6644144Z [31m+ false[39m
2026-01-25T22:07:59.6644345Z 
2026-01-25T22:07:59.6645009Z [36m [2m❯[22m __tests__/save-memory-integration.test.ts:[2m258:28[22m[39m
2026-01-25T22:07:59.6645880Z     [90m256| [39m    )[33m;[39m
2026-01-25T22:07:59.6646463Z     [90m257| [39m
2026-01-25T22:07:59.6647562Z     [90m258| [39m    [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6648622Z     [90m   | [39m                           [31m^[39m
2026-01-25T22:07:59.6649150Z     [90m259| [39m    
2026-01-25T22:07:59.6650440Z     [90m260| [39m    [35mconst[39m graph [33m=[39m [35mawait[39m manager[33m.[39m[34mreadGraph[39m([32m'test-thread-007'[39m)[33m;[39m
2026-01-25T22:07:59.6651341Z 
2026-01-25T22:07:59.6651796Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[74/118]⎯[22m[39m
2026-01-25T22:07:59.6652352Z 
2026-01-25T22:07:59.6654039Z [31m[1m[7m FAIL [27m[22m[39m __tests__/save-memory-integration.test.ts[2m > [22mSave Memory Handler - Integration Tests[2m > [22mshould generate warnings for entity type normalization
2026-01-25T22:07:59.6656014Z [31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m
2026-01-25T22:07:59.6656607Z 
2026-01-25T22:07:59.6656868Z [32m- Expected[39m
2026-01-25T22:07:59.6657322Z [31m+ Received[39m
2026-01-25T22:07:59.6657548Z 
2026-01-25T22:07:59.6658123Z [32m- true[39m
2026-01-25T22:07:59.6658539Z [31m+ false[39m
2026-01-25T22:07:59.6658746Z 
2026-01-25T22:07:59.6659410Z [36m [2m❯[22m __tests__/save-memory-integration.test.ts:[2m299:28[22m[39m
2026-01-25T22:07:59.6660234Z     [90m297| [39m    )[33m;[39m
2026-01-25T22:07:59.6660726Z     [90m298| [39m
2026-01-25T22:07:59.6661762Z     [90m299| [39m    [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6663042Z     [90m   | [39m                           [31m^[39m
2026-01-25T22:07:59.6664397Z     [90m300| [39m    [34mexpect[39m(result[33m.[39mwarnings[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
2026-01-25T22:07:59.6666627Z     [90m301| [39m    [34mexpect[39m(result[33m.[39mwarnings[33m.[39m[34msome[39m(w [33m=>[39m w[33m.[39m[34mincludes[39m([32m'capital letter'[39m)))[33m.[39m[34mto[39m…
2026-01-25T22:07:59.6667682Z 
2026-01-25T22:07:59.6668397Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[75/118]⎯[22m[39m
2026-01-25T22:07:59.6668811Z 
2026-01-25T22:07:59.6670521Z [31m[1m[7m FAIL [27m[22m[39m __tests__/save-memory-integration.test.ts[2m > [22mSave Memory Handler - Integration Tests[2m > [22mshould calculate quality score based on graph structure
2026-01-25T22:07:59.6672718Z [31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m
2026-01-25T22:07:59.6673321Z 
2026-01-25T22:07:59.6673565Z [32m- Expected[39m
2026-01-25T22:07:59.6673997Z [31m+ Received[39m
2026-01-25T22:07:59.6674214Z 
2026-01-25T22:07:59.6674412Z [32m- true[39m
2026-01-25T22:07:59.6674819Z [31m+ false[39m
2026-01-25T22:07:59.6675037Z 
2026-01-25T22:07:59.6675720Z [36m [2m❯[22m __tests__/save-memory-integration.test.ts:[2m369:31[22m[39m
2026-01-25T22:07:59.6676610Z     [90m367| [39m    )[33m;[39m
2026-01-25T22:07:59.6677096Z     [90m368| [39m
2026-01-25T22:07:59.6678144Z     [90m369| [39m    [34mexpect[39m(lowResult[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6679310Z     [90m   | [39m                              [31m^[39m
2026-01-25T22:07:59.6680640Z     [90m370| [39m    [34mexpect[39m(highResult[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6682603Z     [90m371| [39m    [34mexpect[39m(highResult[33m.[39mquality_score)[33m.[39m[34mtoBeGreaterThan[39m(lowResult[33m.[39mquality…
2026-01-25T22:07:59.6683503Z 
2026-01-25T22:07:59.6683998Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[76/118]⎯[22m[39m
2026-01-25T22:07:59.6684358Z 
2026-01-25T22:07:59.6686173Z [31m[1m[7m FAIL [27m[22m[39m __tests__/save-memory-integration.test.ts[2m > [22mSave Memory Handler - Integration Tests[2m > [22mshould allow incremental building with cross-thread entity references
2026-01-25T22:07:59.6688282Z [31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m
2026-01-25T22:07:59.6688858Z 
2026-01-25T22:07:59.6689081Z [32m- Expected[39m
2026-01-25T22:07:59.6689852Z [31m+ Received[39m
2026-01-25T22:07:59.6690092Z 
2026-01-25T22:07:59.6690292Z [32m- true[39m
2026-01-25T22:07:59.6690718Z [31m+ false[39m
2026-01-25T22:07:59.6690926Z 
2026-01-25T22:07:59.6691606Z [36m [2m❯[22m __tests__/save-memory-integration.test.ts:[2m395:33[22m[39m
2026-01-25T22:07:59.6692662Z     [90m393| [39m    )[33m;[39m
2026-01-25T22:07:59.6693139Z     [90m394| [39m
2026-01-25T22:07:59.6694219Z     [90m395| [39m    [34mexpect[39m(firstResult[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6695415Z     [90m   | [39m                                [31m^[39m
2026-01-25T22:07:59.6696801Z     [90m396| [39m    [34mexpect[39m(firstResult[33m.[39mcreated[33m.[39mentities)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
2026-01-25T22:07:59.6697877Z     [90m397| [39m
2026-01-25T22:07:59.6698101Z 
2026-01-25T22:07:59.6698540Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[77/118]⎯[22m[39m
2026-01-25T22:07:59.6698917Z 
2026-01-25T22:07:59.6700903Z [31m[1m[7m FAIL [27m[22m[39m __tests__/save-memory-integration.test.ts[2m > [22mSave Memory Handler - Integration Tests[2m > [22mEntity Names in Response[2m > [22mshould return entity names after successful save
2026-01-25T22:07:59.6703283Z [31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m
2026-01-25T22:07:59.6703885Z 
2026-01-25T22:07:59.6704156Z [32m- Expected[39m
2026-01-25T22:07:59.6704610Z [31m+ Received[39m
2026-01-25T22:07:59.6704856Z 
2026-01-25T22:07:59.6705061Z [32m- true[39m
2026-01-25T22:07:59.6705478Z [31m+ false[39m
2026-01-25T22:07:59.6705685Z 
2026-01-25T22:07:59.6706381Z [36m [2m❯[22m __tests__/save-memory-integration.test.ts:[2m630:30[22m[39m
2026-01-25T22:07:59.6707270Z     [90m628| [39m      )[33m;[39m
2026-01-25T22:07:59.6707767Z     [90m629| [39m
2026-01-25T22:07:59.6708803Z     [90m630| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
2026-01-25T22:07:59.6710175Z     [90m   | [39m                             [31m^[39m
2026-01-25T22:07:59.6711480Z     [90m631| [39m      [34mexpect[39m(result[33m.[39mcreated[33m.[39mentity_names)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
2026-01-25T22:07:59.6713353Z     [90m632| [39m      [34mexpect[39m(result[33m.[39mcreated[33m.[39mentity_names)[33m.[39m[34mtoHaveLength[39m([34m2[39m)[33m;[39m
2026-01-25T22:07:59.6714087Z 
2026-01-25T22:07:59.6714531Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[78/118]⎯[22m[39m
2026-01-25T22:07:59.6714875Z 
2026-01-25T22:07:59.6716561Z [31m[1m[7m FAIL [27m[22m[39m __tests__/storage-abstraction.test.ts[2m > [22mStorage Abstraction[2m > [22mJSONL storage adapter (default)[2m > [22mshould create and read entities using JSONL storage
2026-01-25T22:07:59.6718459Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6719752Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6721542Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6723266Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6724905Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6726140Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6727034Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6728080Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6729054Z [90m [2m❯[22m __tests__/storage-abstraction.test.ts:[2m88:7[22m[39m
2026-01-25T22:07:59.6729717Z 
2026-01-25T22:07:59.6730078Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[79/118]⎯[22m[39m
2026-01-25T22:07:59.6730375Z 
2026-01-25T22:07:59.6731768Z [31m[1m[7m FAIL [27m[22m[39m __tests__/storage-abstraction.test.ts[2m > [22mStorage Abstraction[2m > [22mIn-memory storage adapter (custom)[2m > [22mshould create and read entities
2026-01-25T22:07:59.6734445Z [31m[1m[7m FAIL [27m[22m[39m __tests__/storage-abstraction.test.ts[2m > [22mStorage Abstraction[2m > [22mIn-memory storage adapter (custom)[2m > [22mshould create entities and relations
2026-01-25T22:07:59.6737273Z [31m[1m[7m FAIL [27m[22m[39m __tests__/storage-abstraction.test.ts[2m > [22mStorage Abstraction[2m > [22mIn-memory storage adapter (custom)[2m > [22mshould handle multiple sequential operations
2026-01-25T22:07:59.6739091Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6740491Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6742776Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6744594Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6746361Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6747863Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6748941Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6750247Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6750847Z 
2026-01-25T22:07:59.6751554Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[80/118]⎯[22m[39m
2026-01-25T22:07:59.6751944Z 
2026-01-25T22:07:59.6753740Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mreadGraph[2m > [22mshould only return entities and relations from the specified thread
2026-01-25T22:07:59.6756108Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mreadGraph[2m > [22mshould not leak data between threads
2026-01-25T22:07:59.6758460Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22msearchNodes[2m > [22mshould only search within the specified thread
2026-01-25T22:07:59.6761023Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mopenNodes[2m > [22mshould only open nodes from the specified thread
2026-01-25T22:07:59.6763828Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mqueryNodes[2m > [22mshould only query nodes from the specified thread
2026-01-25T22:07:59.6766406Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mlistEntities[2m > [22mshould only list entities from the specified thread
2026-01-25T22:07:59.6769471Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mlistEntities[2m > [22mshould filter by entity type within thread
2026-01-25T22:07:59.6772388Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mgetMemoryStats[2m > [22mshould return stats only for the specified thread
2026-01-25T22:07:59.6775024Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mgetRecentChanges[2m > [22mshould only return changes from the specified thread
2026-01-25T22:07:59.6777586Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mfindRelationPath[2m > [22mshould only find paths within the specified thread
2026-01-25T22:07:59.6780413Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mdetectConflicts[2m > [22mshould only detect conflicts within the specified thread
2026-01-25T22:07:59.6783117Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mgetContext[2m > [22mshould only get context within the specified thread
2026-01-25T22:07:59.6785851Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mgetFlaggedEntities[2m > [22mshould only return flagged entities from the specified thread
2026-01-25T22:07:59.6788760Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mgetObservationHistory[2m > [22mshould only retrieve observation history from the specified thread
2026-01-25T22:07:59.6791437Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mgetEntityNamesInThread[2m > [22mshould only return entity names from the specified thread
2026-01-25T22:07:59.6794249Z [31m[1m[7m FAIL [27m[22m[39m __tests__/thread-isolation.test.ts[2m > [22mThread Isolation[2m > [22mCross-thread reference prevention[2m > [22mshould prevent relations to entities in other threads during validation
2026-01-25T22:07:59.6796049Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6797216Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6798871Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6800606Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6802548Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6803874Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6804924Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6806083Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6807121Z [90m [2m❯[22m __tests__/thread-isolation.test.ts:[2m90:5[22m[39m
2026-01-25T22:07:59.6807574Z 
2026-01-25T22:07:59.6807963Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[81/118]⎯[22m[39m
2026-01-25T22:07:59.6808285Z 
2026-01-25T22:07:59.6809692Z [31m[1m[7m FAIL [27m[22m[39m __tests__/update-observation.test.ts[2m > [22mupdateObservation[2m > [22mshould update an observation and create a new version
2026-01-25T22:07:59.6811437Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6812981Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6814867Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6816572Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6818410Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6819727Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6820719Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6822009Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6823312Z [90m [2m❯[22m __tests__/update-observation.test.ts:[2m41:5[22m[39m
2026-01-25T22:07:59.6823735Z 
2026-01-25T22:07:59.6824085Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[82/118]⎯[22m[39m
2026-01-25T22:07:59.6824389Z 
2026-01-25T22:07:59.6825880Z [31m[1m[7m FAIL [27m[22m[39m __tests__/update-observation.test.ts[2m > [22mupdateObservation[2m > [22mshould inherit confidence and importance from old observation if not provided
2026-01-25T22:07:59.6827646Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6828927Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6830676Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6832401Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6834362Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6835869Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6836991Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6838297Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6839490Z [90m [2m❯[22m __tests__/update-observation.test.ts:[2m70:5[22m[39m
2026-01-25T22:07:59.6839984Z 
2026-01-25T22:07:59.6840421Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[83/118]⎯[22m[39m
2026-01-25T22:07:59.6840764Z 
2026-01-25T22:07:59.6842660Z [31m[1m[7m FAIL [27m[22m[39m __tests__/update-observation.test.ts[2m > [22mupdateObservation[2m > [22mshould inherit from entity if observation does not have confidence/importance
2026-01-25T22:07:59.6844352Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6845690Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6847664Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6849396Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6851354Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6853198Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6854273Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6855423Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6856413Z [90m [2m❯[22m __tests__/update-observation.test.ts:[2m94:5[22m[39m
2026-01-25T22:07:59.6856830Z 
2026-01-25T22:07:59.6857188Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[84/118]⎯[22m[39m
2026-01-25T22:07:59.6857497Z 
2026-01-25T22:07:59.6858648Z [31m[1m[7m FAIL [27m[22m[39m __tests__/update-observation.test.ts[2m > [22mupdateObservation[2m > [22mshould throw error if observation not found
2026-01-25T22:07:59.6860098Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6861289Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6863586Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6865180Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6866718Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6868177Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6869243Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6870363Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6871309Z [90m [2m❯[22m __tests__/update-observation.test.ts:[2m113:5[22m[39m
2026-01-25T22:07:59.6871763Z 
2026-01-25T22:07:59.6872328Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[85/118]⎯[22m[39m
2026-01-25T22:07:59.6872629Z 
2026-01-25T22:07:59.6873899Z [31m[1m[7m FAIL [27m[22m[39m __tests__/update-observation.test.ts[2m > [22mupdateObservation[2m > [22mshould throw error if observation already superseded
2026-01-25T22:07:59.6875415Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6876664Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6878400Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6879852Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6881890Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6883412Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6884378Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6885448Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6886446Z [90m [2m❯[22m __tests__/update-observation.test.ts:[2m123:5[22m[39m
2026-01-25T22:07:59.6886878Z 
2026-01-25T22:07:59.6887221Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[86/118]⎯[22m[39m
2026-01-25T22:07:59.6887527Z 
2026-01-25T22:07:59.6888615Z [31m[1m[7m FAIL [27m[22m[39m __tests__/update-observation.test.ts[2m > [22mupdateObservation[2m > [22mshould create a valid version chain
2026-01-25T22:07:59.6890071Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6891330Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6893296Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6894862Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6896609Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6897934Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6898902Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6900004Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6901042Z [90m [2m❯[22m __tests__/update-observation.test.ts:[2m138:5[22m[39m
2026-01-25T22:07:59.6901704Z 
2026-01-25T22:07:59.6902285Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[87/118]⎯[22m[39m
2026-01-25T22:07:59.6902618Z 
2026-01-25T22:07:59.6903723Z [31m[1m[7m FAIL [27m[22m[39m __tests__/update-observation.test.ts[2m > [22mupdateObservation[2m > [22mshould update entity timestamp
2026-01-25T22:07:59.6905232Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6906506Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6908331Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6909926Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6911718Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6913218Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6914196Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6915316Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6916362Z [90m [2m❯[22m __tests__/update-observation.test.ts:[2m196:5[22m[39m
2026-01-25T22:07:59.6916811Z 
2026-01-25T22:07:59.6917175Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[88/118]⎯[22m[39m
2026-01-25T22:07:59.6917483Z 
2026-01-25T22:07:59.6919047Z [31m[1m[7m FAIL [27m[22m[39m __tests__/validate-memory.test.ts[2m > [22mValidate Memory Tool[2m > [22mPre-validation without saving[2m > [22mshould validate cross-thread entity references
2026-01-25T22:07:59.6920979Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'filter')[39m
2026-01-25T22:07:59.6922449Z [36m [2m❯[22m Module.createEntities lib/operations/entity-operations.ts:[2m22:32[22m[39m
2026-01-25T22:07:59.6924227Z     [90m 20| [39m  [35mconst[39m existingNames [33m=[39m [35mnew[39m [33mSet[39m(graph[33m.[39mentities[33m.[39m[34mmap[39m(e [33m=>[39m e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6925816Z     [90m 21| [39m  [90m// Filter out entities that already exist, entities are expected to [39m…
2026-01-25T22:07:59.6927027Z     [90m 22| [39m  [35mconst[39m newEntities [33m=[39m entities[33m.[39m[34mfilter[39m(e [33m=>[39m [33m![39mexistingNames[33m.[39m[34mhas[39m(e[33m.[39mname))[33m;[39m
2026-01-25T22:07:59.6927368Z     [90m   | [39m                               [31m^[39m
2026-01-25T22:07:59.6928008Z     [90m 23| [39m  graph[33m.[39mentities[33m.[39m[34mpush[39m([33m...[39mnewEntities)[33m;[39m
2026-01-25T22:07:59.6928562Z     [90m 24| [39m  [35mawait[39m storage[33m.[39m[34msaveGraph[39m(graph)[33m;[39m
2026-01-25T22:07:59.6929068Z [90m [2m❯[22m __tests__/validate-memory.test.ts:[2m155:7[22m[39m
2026-01-25T22:07:59.6929081Z 
2026-01-25T22:07:59.6929442Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[89/118]⎯[22m[39m
2026-01-25T22:07:59.6929455Z 
2026-01-25T22:07:59.6930208Z [2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m5 passed[39m[22m[90m (16)[39m
2026-01-25T22:07:59.6930944Z [2m      Tests [22m [1m[31m118 failed[39m[22m[2m | [22m[1m[32m113 passed[39m[22m[90m (231)[39m
2026-01-25T22:07:59.6931216Z [2m   Start at [22m 22:07:53
2026-01-25T22:07:59.6932391Z [2m   Duration [22m 5.39s[2m (transform 671ms, setup 0ms, collect 4.21s, tests 4.01s, environment 6ms, prepare 1.97s)[22m
2026-01-25T22:07:59.6932407Z 
2026-01-25T22:07:59.6932415Z 
2026-01-25T22:07:59.6959854Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/analytics.test.ts:46:5


2026-01-25T22:07:59.6968873Z 
2026-01-25T22:07:59.6971913Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/analytics.test.ts:91:5


2026-01-25T22:07:59.6972856Z 
2026-01-25T22:07:59.6975550Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/analytics.test.ts:156:5


2026-01-25T22:07:59.6976191Z 
2026-01-25T22:07:59.6978903Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/analytics.test.ts:185:5


2026-01-25T22:07:59.6979558Z 
2026-01-25T22:07:59.6982527Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/analytics.test.ts:252:5


2026-01-25T22:07:59.6983286Z 
2026-01-25T22:07:59.6986024Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/analytics.test.ts:308:5


2026-01-25T22:07:59.6986731Z 
2026-01-25T22:07:59.6989397Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/analytics.test.ts:341:5


2026-01-25T22:07:59.6990071Z 
2026-01-25T22:07:59.6993072Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/edge-cases-coverage.test.ts:29:7


2026-01-25T22:07:59.6993805Z 
2026-01-25T22:07:59.6996564Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/edge-cases-coverage.test.ts:69:7


2026-01-25T22:07:59.6999179Z (node:2978) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 unhandledRejection listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
2026-01-25T22:07:59.6999682Z (Use `node --trace-warnings ...` to show where the warning was created)
2026-01-25T22:07:59.6999696Z 
2026-01-25T22:07:59.7002819Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/edge-cases-coverage.test.ts:109:7


2026-01-25T22:07:59.7003591Z 
2026-01-25T22:07:59.7006521Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/edge-cases-coverage.test.ts:169:7


2026-01-25T22:07:59.7007300Z 
2026-01-25T22:07:59.7010147Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/edge-cases-coverage.test.ts:201:7


2026-01-25T22:07:59.7010925Z 
2026-01-25T22:07:59.7013938Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/edge-cases-coverage.test.ts:227:7


2026-01-25T22:07:59.7014691Z 
2026-01-25T22:07:59.7017700Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:39:7


2026-01-25T22:07:59.7018412Z 
2026-01-25T22:07:59.7021412Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:99:7


2026-01-25T22:07:59.7022369Z 
2026-01-25T22:07:59.7025491Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:127:7


2026-01-25T22:07:59.7026529Z 
2026-01-25T22:07:59.7029568Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:183:7


2026-01-25T22:07:59.7030340Z 
2026-01-25T22:07:59.7033587Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:223:7


2026-01-25T22:07:59.7034427Z 
2026-01-25T22:07:59.7037484Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:293:7


2026-01-25T22:07:59.7038266Z 
2026-01-25T22:07:59.7041405Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:334:7


2026-01-25T22:07:59.7042338Z 
2026-01-25T22:07:59.7045409Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:367:7


2026-01-25T22:07:59.7046146Z 
2026-01-25T22:07:59.7049052Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:406:7


2026-01-25T22:07:59.7049793Z 
2026-01-25T22:07:59.7053027Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:435:7


2026-01-25T22:07:59.7053834Z 
2026-01-25T22:07:59.7056292Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:465:7


2026-01-25T22:07:59.7056850Z 
2026-01-25T22:07:59.7058634Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:512:7


2026-01-25T22:07:59.7059072Z 
2026-01-25T22:07:59.7061577Z ##[error]TypeError: updates is not iterable
 ❯ Module.bulkUpdate lib/maintenance/bulk-updater.ts:27:24
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:562:22


2026-01-25T22:07:59.7062515Z 
2026-01-25T22:07:59.7065440Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:571:7


2026-01-25T22:07:59.7066137Z 
2026-01-25T22:07:59.7068907Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:606:7


2026-01-25T22:07:59.7069708Z 
2026-01-25T22:07:59.7072728Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:632:7


2026-01-25T22:07:59.7073533Z 
2026-01-25T22:07:59.7076683Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:665:7


2026-01-25T22:07:59.7077448Z 
2026-01-25T22:07:59.7080578Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:691:7


2026-01-25T22:07:59.7081312Z 
2026-01-25T22:07:59.7084476Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:767:7


2026-01-25T22:07:59.7085427Z 
2026-01-25T22:07:59.7088437Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:809:7


2026-01-25T22:07:59.7089125Z 
2026-01-25T22:07:59.7092219Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph-manager-extended.test.ts:851:7


2026-01-25T22:07:59.7093042Z 
2026-01-25T22:07:59.7095856Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:55:27


2026-01-25T22:07:59.7096548Z 
2026-01-25T22:07:59.7099179Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:79:7


2026-01-25T22:07:59.7099860Z 
2026-01-25T22:07:59.7102602Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:89:27


2026-01-25T22:07:59.7103283Z 
2026-01-25T22:07:59.7105896Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:96:7


2026-01-25T22:07:59.7106523Z 
2026-01-25T22:07:59.7109312Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:141:7


2026-01-25T22:07:59.7109987Z 
2026-01-25T22:07:59.7113111Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:210:7


2026-01-25T22:07:59.7113861Z 
2026-01-25T22:07:59.7116631Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:231:7


2026-01-25T22:07:59.7117327Z 
2026-01-25T22:07:59.7120171Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:306:7


2026-01-25T22:07:59.7120868Z 
2026-01-25T22:07:59.7123389Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:350:7


2026-01-25T22:07:59.7123906Z 
2026-01-25T22:07:59.7127725Z ##[error]AssertionError: expected [Function] to throw error including 'Entity with name NonExistent not found' but got 'Cannot read properties of undefined (…'

Expected: "Entity with name NonExistent not found"
Received: "Cannot read properties of undefined (reading 'map')"

 ❯ __tests__/knowledge-graph.test.ts:398:7


2026-01-25T22:07:59.7128540Z 
2026-01-25T22:07:59.7131588Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:404:7


2026-01-25T22:07:59.7132685Z 
2026-01-25T22:07:59.7135726Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:448:7


2026-01-25T22:07:59.7136601Z 
2026-01-25T22:07:59.7139527Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:510:7


2026-01-25T22:07:59.7140356Z 
2026-01-25T22:07:59.7143541Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:540:7


2026-01-25T22:07:59.7144609Z 
2026-01-25T22:07:59.7147721Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:540:7


2026-01-25T22:07:59.7148597Z 
2026-01-25T22:07:59.7151717Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:540:7


2026-01-25T22:07:59.7152781Z 
2026-01-25T22:07:59.7155946Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:540:7


2026-01-25T22:07:59.7156796Z 
2026-01-25T22:07:59.7159917Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:540:7


2026-01-25T22:07:59.7160810Z 
2026-01-25T22:07:59.7164074Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:540:7


2026-01-25T22:07:59.7165068Z 
2026-01-25T22:07:59.7168329Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:540:7


2026-01-25T22:07:59.7169316Z 
2026-01-25T22:07:59.7172768Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:686:7


2026-01-25T22:07:59.7173635Z 
2026-01-25T22:07:59.7176776Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:734:7


2026-01-25T22:07:59.7177910Z 
2026-01-25T22:07:59.7181147Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:780:7


2026-01-25T22:07:59.7182238Z 
2026-01-25T22:07:59.7185122Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:843:7


2026-01-25T22:07:59.7185864Z 
2026-01-25T22:07:59.7188234Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:907:7


2026-01-25T22:07:59.7188733Z 
2026-01-25T22:07:59.7190392Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:998:7


2026-01-25T22:07:59.7190822Z 
2026-01-25T22:07:59.7192726Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:998:7


2026-01-25T22:07:59.7193228Z 
2026-01-25T22:07:59.7194893Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:998:7


2026-01-25T22:07:59.7195355Z 
2026-01-25T22:07:59.7198145Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:998:7


2026-01-25T22:07:59.7198975Z 
2026-01-25T22:07:59.7200974Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:998:7


2026-01-25T22:07:59.7201470Z 
2026-01-25T22:07:59.7203349Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:998:7


2026-01-25T22:07:59.7204036Z 
2026-01-25T22:07:59.7205674Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/knowledge-graph.test.ts:998:7


2026-01-25T22:07:59.7206100Z 
2026-01-25T22:07:59.7208175Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:67:7


2026-01-25T22:07:59.7208886Z 
2026-01-25T22:07:59.7211541Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:98:7


2026-01-25T22:07:59.7212865Z 
2026-01-25T22:07:59.7215757Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:114:7


2026-01-25T22:07:59.7216495Z 
2026-01-25T22:07:59.7219199Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:138:7


2026-01-25T22:07:59.7219889Z 
2026-01-25T22:07:59.7222743Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:156:7


2026-01-25T22:07:59.7223484Z 
2026-01-25T22:07:59.7226177Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:187:7


2026-01-25T22:07:59.7226848Z 
2026-01-25T22:07:59.7229325Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:206:7


2026-01-25T22:07:59.7229986Z 
2026-01-25T22:07:59.7232615Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:256:7


2026-01-25T22:07:59.7233324Z 
2026-01-25T22:07:59.7235921Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/neo4j-e2e.test.ts:317:7


2026-01-25T22:07:59.7236587Z 
2026-01-25T22:07:59.7239294Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/observation-history.test.ts:58:5


2026-01-25T22:07:59.7239989Z 
2026-01-25T22:07:59.7242923Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/observation-history.test.ts:84:5


2026-01-25T22:07:59.7243833Z 
2026-01-25T22:07:59.7246621Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/observation-history.test.ts:132:5


2026-01-25T22:07:59.7247323Z 
2026-01-25T22:07:59.7250128Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/observation-history.test.ts:182:5


2026-01-25T22:07:59.7250792Z 
2026-01-25T22:07:59.7253718Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/observation-history.test.ts:232:5


2026-01-25T22:07:59.7254429Z 
2026-01-25T22:07:59.7256854Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/observation-history.test.ts:273:5


2026-01-25T22:07:59.7257380Z 
2026-01-25T22:07:59.7259369Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/observation-history.test.ts:305:5


2026-01-25T22:07:59.7260078Z 
2026-01-25T22:07:59.7261623Z ##[error]AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ __tests__/save-memory-integration.test.ts:59:28


2026-01-25T22:07:59.7262303Z 
2026-01-25T22:07:59.7263786Z ##[error]AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ __tests__/save-memory-integration.test.ts:182:28


2026-01-25T22:07:59.7264240Z 
2026-01-25T22:07:59.7265634Z ##[error]AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ __tests__/save-memory-integration.test.ts:223:28


2026-01-25T22:07:59.7266060Z 
2026-01-25T22:07:59.7267594Z ##[error]AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ __tests__/save-memory-integration.test.ts:258:28


2026-01-25T22:07:59.7268042Z 
2026-01-25T22:07:59.7269404Z ##[error]AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ __tests__/save-memory-integration.test.ts:299:28


2026-01-25T22:07:59.7269823Z 
2026-01-25T22:07:59.7271167Z ##[error]AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ __tests__/save-memory-integration.test.ts:369:31


2026-01-25T22:07:59.7271580Z 
2026-01-25T22:07:59.7273638Z ##[error]AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ __tests__/save-memory-integration.test.ts:395:33


2026-01-25T22:07:59.7274350Z 
2026-01-25T22:07:59.7276515Z ##[error]AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ __tests__/save-memory-integration.test.ts:630:30


2026-01-25T22:07:59.7276971Z 
2026-01-25T22:07:59.7278587Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/storage-abstraction.test.ts:88:7


2026-01-25T22:07:59.7279004Z 
2026-01-25T22:07:59.7280251Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32


2026-01-25T22:07:59.7280717Z 
2026-01-25T22:07:59.7281957Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32


2026-01-25T22:07:59.7282824Z 
2026-01-25T22:07:59.7284151Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32


2026-01-25T22:07:59.7284585Z 
2026-01-25T22:07:59.7286157Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7286754Z 
2026-01-25T22:07:59.7288314Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7288730Z 
2026-01-25T22:07:59.7290234Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7291144Z 
2026-01-25T22:07:59.7293164Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7293669Z 
2026-01-25T22:07:59.7295364Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7295813Z 
2026-01-25T22:07:59.7297370Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7297858Z 
2026-01-25T22:07:59.7299381Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7299787Z 
2026-01-25T22:07:59.7301315Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7301719Z 
2026-01-25T22:07:59.7303965Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7304450Z 
2026-01-25T22:07:59.7306232Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7306670Z 
2026-01-25T22:07:59.7308248Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7308693Z 
2026-01-25T22:07:59.7310229Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7310651Z 
2026-01-25T22:07:59.7312423Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7312918Z 
2026-01-25T22:07:59.7314556Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7314982Z 
2026-01-25T22:07:59.7316535Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7316955Z 
2026-01-25T22:07:59.7318500Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/thread-isolation.test.ts:90:5


2026-01-25T22:07:59.7318916Z 
2026-01-25T22:07:59.7320449Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/update-observation.test.ts:41:5


2026-01-25T22:07:59.7320859Z 
2026-01-25T22:07:59.7322593Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/update-observation.test.ts:70:5


2026-01-25T22:07:59.7323228Z 
2026-01-25T22:07:59.7324823Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/update-observation.test.ts:94:5


2026-01-25T22:07:59.7325237Z 
2026-01-25T22:07:59.7326775Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/update-observation.test.ts:113:5


2026-01-25T22:07:59.7327181Z 
2026-01-25T22:07:59.7328719Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/update-observation.test.ts:123:5


2026-01-25T22:07:59.7329124Z 
2026-01-25T22:07:59.7330661Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/update-observation.test.ts:138:5


2026-01-25T22:07:59.7331079Z 
2026-01-25T22:07:59.7332777Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/update-observation.test.ts:196:5


2026-01-25T22:07:59.7333237Z 
2026-01-25T22:07:59.7334838Z ##[error]TypeError: Cannot read properties of undefined (reading 'filter')
 ❯ Module.createEntities lib/operations/entity-operations.ts:22:32
 ❯ __tests__/validate-memory.test.ts:155:7


2026-01-25T22:07:59.7335546Z npm error Lifecycle script `test` failed with error:
2026-01-25T22:07:59.7335633Z npm error code 1
2026-01-25T22:07:59.7336066Z npm error path /home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced/src/memory-enhanced
2026-01-25T22:07:59.7336252Z npm error workspace server-memory-enhanced@3.0.0
2026-01-25T22:07:59.7336859Z npm error location /home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced/src/memory-enhanced
2026-01-25T22:07:59.7336984Z npm error command failed
2026-01-25T22:07:59.7337148Z npm error command sh -c vitest run --coverage
2026-01-25T22:07:59.7339595Z ##[error]Process completed with exit code 1.
2026-01-25T22:07:59.7870801Z Post job cleanup.
2026-01-25T22:07:59.8872484Z [command]/usr/bin/git version
2026-01-25T22:07:59.8910811Z git version 2.52.0
2026-01-25T22:07:59.8956453Z Temporarily overriding HOME='/home/runner/work/_temp/afbb76c2-6b12-4563-b80c-9eab718a8095' before making global git config changes
2026-01-25T22:07:59.8958111Z Adding repository directory to the temporary git global config as a safe directory
2026-01-25T22:07:59.8972856Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/mcp-memory-graph-enhanced/mcp-memory-graph-enhanced
2026-01-25T22:07:59.9013268Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-25T22:07:59.9050078Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-25T22:07:59.9314027Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-25T22:07:59.9339776Z http.https://github.com/.extraheader
2026-01-25T22:07:59.9354814Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2026-01-25T22:07:59.9390877Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-25T22:07:59.9641337Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-25T22:07:59.9681351Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-25T22:08:00.0059631Z Print service container logs: 2f31ab8d3fef4e29abdac53c9daf3c35_neo4j5150_4a6cc6
2026-01-25T22:08:00.0064603Z ##[command]/usr/bin/docker logs --details dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:08:00.0225301Z  Changed password for user 'neo4j'. IMPORTANT: this change will only take effect if performed before the database is started for the first time.
2026-01-25T22:08:00.0226731Z  2026-01-25 22:07:25.158+0000 INFO  Logging config in use: File '/var/lib/neo4j/conf/user-logs.xml'
2026-01-25T22:08:00.0227500Z  2026-01-25 22:07:25.175+0000 INFO  Starting...
2026-01-25T22:08:00.0228316Z  2026-01-25 22:07:26.081+0000 INFO  This instance is ServerId{0906f648} (0906f648-fc0c-432d-bcc2-db733e6fd12d)
2026-01-25T22:08:00.0229216Z  2026-01-25 22:07:26.733+0000 INFO  ======== Neo4j 5.15.0 ========
2026-01-25T22:08:00.0229844Z  2026-01-25 22:07:28.250+0000 INFO  Bolt enabled on 0.0.0.0:7687.
2026-01-25T22:08:00.0230530Z  2026-01-25 22:07:28.903+0000 INFO  HTTP enabled on 0.0.0.0:7474.
2026-01-25T22:08:00.0231322Z  2026-01-25 22:07:28.904+0000 INFO  Remote interface available at http://localhost:7474/
2026-01-25T22:08:00.0232463Z  2026-01-25 22:07:28.907+0000 INFO  id: 1BA942BBBA7EFC592AD776CCCFB58146406B143D1F2E681748E9E9CD8B916621
2026-01-25T22:08:00.0233206Z  2026-01-25 22:07:28.907+0000 INFO  name: system
2026-01-25T22:08:00.0233777Z  2026-01-25 22:07:28.907+0000 INFO  creationDate: 2026-01-25T22:07:27.22Z
2026-01-25T22:08:00.0234351Z  2026-01-25 22:07:28.907+0000 INFO  Started.
2026-01-25T22:08:00.0247412Z Stop and remove container: 2f31ab8d3fef4e29abdac53c9daf3c35_neo4j5150_4a6cc6
2026-01-25T22:08:00.0253042Z ##[command]/usr/bin/docker rm --force dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:08:00.3736454Z dbee7b1ac7499626cd1d049cfa6112e533abba364f129b4912d2b1eb6432e438
2026-01-25T22:08:00.3763793Z Remove container network: github_network_18685c3c84f440f5b0bb34fe5037ed79
2026-01-25T22:08:00.3768167Z ##[command]/usr/bin/docker network rm github_network_18685c3c84f440f5b0bb34fe5037ed79
2026-01-25T22:08:00.4849005Z github_network_18685c3c84f440f5b0bb34fe5037ed79
2026-01-25T22:08:00.4913357Z Cleaning up orphan processes
